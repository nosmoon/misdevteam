<?xml version="1.0" encoding="EUC-KR"?>
<?xml-stylesheet href="../../../css/style_sheet.css" type="text/css" ?>
<xhtml:html xmlns:ex="http://www.comsquare.co.kr/xforms/excel" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:ms="urn:schemas-microsoft-com:xslt" xmlns:my="http://www.comsquare.co.kr/example" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/2002/01/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:cs="http://www.comsquare.co.kr/xforms">
	<xhtml:head>
		<xhtml:title>Untitle</xhtml:title>
		<model id="model1">
			<instance id="instance1">
				<root xmlns="">
					<initData>
						<!-- 화면 로딩시의 초기 데이터를 담당 -->
						<session/>
						<!-- 서버의 세션 정보를 담당한다 -->
						<comboSet>
							<xx_lvcmpy_clsf_010/>
							<xx_lvcmpy_clsf_020/>
							<!-- 선택계열의 정보를 담당 -->
							<lvcmpy_clsf>
								<item/>
							</lvcmpy_clsf>
							<xx_lvcmpy_clsf_030/>
							<xx_lvcmpy_clsf_040/>
							<xx_lvcmpy_clsf_050/>
							<xx_lvcmpy_clsf_060/>
							<xx_lvcmpy_clsf_070/>
							<xx_lvcmpy_clsf_080/>
						</comboSet>
						<!-- 콤보리스트와 같은 선택게열의 데이터는 <item>을 반복함으로써 list를 구성한다. -->
						<pageInfo>
							<!-- 해당 화면의 필요한 기타 정보들을 추가운영 할 수 있다 -->
						</pageInfo>
						<!-- 해당 화면의 필요한 기타 정보들을 추가운영 할 수 있다 -->
						<hd_lvcmpy_1100>
							<dataSet>
								<type_clsf>C</type_clsf>
							</dataSet>
						</hd_lvcmpy_1100>
					</initData>
					<reqData>
						<!-- 전달하고자 하는 데이터를 담당 ( submit 함수에서 처리) -->
						<searchData>
							<emp_no/>
							<cmpy_dt/>
							<nm_korn/>
							<lvcmpy_dt/>
						</searchData>
						<!-- 검색조건 처리 -->
						<reqForm>
							<lvcmpy_clsf/>
							<emp_no/>
							<dept_cd/>
							<dept_nm/>
							<in_cmpy_dt/>
							<last_midl_adjm_dt/>
							<lvcmpy_dt/>
							<nm_korn/>
							<lvcmpy_tm_dt/>
							<avg_tm_dt1/>
							<avg_tm_dt2/>
							<in_cmpy_tm_dt/>
							<year/>
							<day/>
							<join_year/>
							<ov_avg_tm_dt/>
							<saly_pay_dt/>
							<yymm_alon/>
							<avg_saly/>
							<lvcmpy_saly/>
							<lvcmpy_mm/>
							<ym_avg_saly/>
							<year_vaca_dds/>
							<add_vaca_dds/>
							<use_vaca_dds/>
							<duty_vaca_dds/>
							<tm_vaca_dds/>
							<total_vaca_dds/>
							<vaca_saly/>
							<lvcmpy_add_saly/>
							<sp_lvcmpy_add_saly/>
							<ym_avg_saly2/>
							<year_vaca_dds2/>
							<add_vaca_dds2/>
							<tm_vaca_dds2/>
							<total_vaca_dds2/>
							<mm_saly_1/>
							<mm_saly_2/>
							<mm_saly_3/>
							<mm_saly_4/>
							<mm_alon_1/>
							<mm_alon_2/>
							<mm_alon_3/>
							<mm_alon_4/>
							<sum_mm_saly/>
							<sum_mm_alon/>
							<temp_vaca_dds/>
							<use_vaca_dds2/>
							<duty_vaca_dds2/>
							<temp_vaca_dds2/>
							<base_saly/>
							<posk_saly/>
							<join_year_2012/>
							<join_year_2013/>
							<avg_wag_dt/>
							<sum_total_hody/>
						</reqForm>
						<!-- formData 팝업,화면전환시 data이동시 -->
						<multiUpDate/>
						<!-- MultiUpDate유형 사용시 처리 -->
						<fwdData>
							<func_nm/>
						</fwdData>
						<join_tm/>
						<searchData_tm>
							<emp_no/>
							<nm_korn/>
							<lvcmpy_dt/>
						</searchData_tm>
						<searchData1>
							<in_cmpy_dt/>
							<lvcmpy_dt/>
						</searchData1>
					</reqData>
					<resData>
						<!-- 전달 받은 데이터를 담당 ( submit의 결과가 담김) -->
						<!-- 전달 받은 formData를 담당 ( submit의 결과가 담김) -->
						<!-- 전달 받은 데이터를 가공할 임시저장소 ( submit의 결과가 담김) -->
						<msg/>
						<!-- 전달 받은 errorCode를 담당 ( submit의 결과가 담김) -->
						<!-- 전달 받은 errorMsg를 담당 ( submit의 결과가 담김) -->
						<gridData1>
							<!-- 전달 받은 grid데이터를 담당 ( submit의 결과가 담김) -->
							<record>
								<saly_pay_mm/>
								<saly_fr_dt/>
								<saly_to_dt/>
								<saly_cnt/>
								<pay_saly1/>
								<yymm_alon1/>
								<hody_alon1/>
								<pay_saly2/>
								<yymm_alon2/>
								<hody_alon2/>
								<emp_no/>
								<cmpy_cd/>
							</record>
						</gridData1>
						<gridData2>
							<record>
								<saly_total_cnt/>
								<sum_total_saly1/>
								<sum_total_yymm1/>
								<sum_total_hody1/>
								<sum_total_saly2/>
								<sum_total_yymm2/>
								<sum_total_hody2/>
							</record>
						</gridData2>
						<cnt/>
						<cnt2/>
					</resData>
					<tempData/>
				</root>
			</instance>
			<script type="javascript">
				<![CDATA[
				function setEmp_no(emp_no){
					//model1.reset();
					goSearch(emp_no)
					model1.refresh();
				}
				function setLvcmpy(total_clon){
					model1.setValue("/root/reqData/reqForm/vaca_saly", total_clon);
					output20.refresh();
				}
				function lastday(calyear,calmonth)
				{
				    var  dayOfMonth  = new Array(31,28,31,30,31,30,31,31,30,31,30,31);
				        if (((calyear %4 == 0) && (calyear % 100 != 0))||(calyear % 400 == 0))
				            dayOfMonth[1] = 29;
				        var nDays = dayOfMonth[calmonth-1];
				    return nDays;
				}
				function setLvcmpy_dt(emp_no, nm_korn, lvcmpy_dt, lvcmpy_clsf ){
					
					if(  lvcmpy_clsf == "1"  ||  lvcmpy_clsf == "2" ||  lvcmpy_clsf == "4" )
					{
						alert("일반 퇴직 및 중간정산 , DC전환 조회 일 경우 \n 퇴직금산정작업화면에서 조회해 주십시오.");
						 return ;
					}
					 if ( lvcmpy_clsf == "5" )
					{
						lvcmpy_clsf = model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_070");
					}
					 if ( lvcmpy_clsf == "6" )
					{
						lvcmpy_clsf = model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_080");
					}
					
					
					model1.setValue("/root/reqData/reqForm/lvcmpy_clsf", lvcmpy_clsf);
					model1.setValue("/root/reqData/searchData_tm/emp_no", emp_no);
					model1.setValue("/root/reqData/searchData_tm/lvcmpy_dt", lvcmpy_dt);
					model1.send("hd_lvcmpy_1109");
					
					model1.copyNode("/root/resData/gridData1", "/root/dataSet/CURLIST2");
					model1.setValue("/root/reqData/reqForm/emp_no", emp_no); // 사번
					model1.setValue("/root/reqData/reqForm/nm_korn", nm_korn); // 성명
					//	평균임금계산기준일 셋팅
					//	기존 - 평균임금계산기준일,퇴직금산정기간종료 셋팅시 rvrs_prd_todt 사용
					//	변경 - 평균임금계산기준일 avg_wag_dt , 퇴직금산정기간종료 rvrs_prd_todt 사용
					if(model1.getValue("/root/dataSet/CURLIST/record/avg_wag_dt") != ""){ //기존자료 조회시 에러방지를 위해 avg_wag_dt 값 존재시 avg_wag_dt 셋팅, 없는 경우 rvrs_prd_todt 셋팅
						model1.setValue("/root/reqData/reqForm/avg_tm_dt1", model1.getValue("/root/dataSet/CURLIST/record/avg_wag_dt"));
					}else{
						model1.setValue("/root/reqData/reqForm/avg_tm_dt1", model1.getValue("/root/dataSet/CURLIST/record/rvrs_prd_todt"));
					}		
					//model1.setValue("/root/reqData/reqForm/avg_tm_dt1", model1.getValue("/root/dataSet/CURLIST/record/rvrs_prd_todt")); // 평균임금계산기준일
					model1.setValue("/root/reqData/reqForm/lvcmpy_tm_dt", model1.getValue("/root/dataSet/CURLIST/record/lvcmpy_dt")); // 퇴직(중간정산)예정일
					model1.setValue("/root/reqData/reqForm/in_cmpy_tm_dt", model1.getValue("/root/dataSet/CURLIST/record/rvrs_prd_frdt")); // 퇴직금 산정기간 시작
					model1.setValue("/root/reqData/reqForm/avg_tm_dt2", model1.getValue("/root/dataSet/CURLIST/record/rvrs_prd_todt")); // 퇴직금 산정기간 종료
					model1.setValue("/root/reqData/reqForm/dept_cd", model1.getValue("/root/dataSet/CURLIST/record/dept_cd")); // 부서코드
					model1.setValue("/root/reqData/reqForm/dept_nm", model1.getValue("/root/dataSet/CURLIST/record/dept_nm")); // 부서
					model1.setValue("/root/reqData/reqForm/in_cmpy_dt", model1.getValue("/root/dataSet/CURLIST/record/in_cmpy_dt")); // 입사일
					model1.setValue("/root/reqData/reqForm/last_midl_adjm_dt", model1.getValue("/root/dataSet/CURLIST/record/last_midl_adjm_dt")); // 최종중간정산일자
					model1.setValue("/root/reqData/reqForm/lvcmpy_dt", model1.getValue("/root/dataSet/CURLIST/record/real_lvcmpy_dt")); // 퇴직일자
					model1.setValue("/root/reqData/reqForm/join_year", model1.getValue("/root/dataSet/CURLIST/record/cont_svc_yys")); // 근속년수
					model1.setValue("/root/reqData/reqForm/join_year_2012", model1.getValue("/root/dataSet/CURLIST/record/cont_svc_yys_2012")); // 근속년수
					model1.setValue("/root/reqData/reqForm/join_year_2013", model1.getValue("/root/dataSet/CURLIST/record/cont_svc_yys_2013")); // 근속년수

				    model1.setValue("/root/reqData/reqForm/year", model1.getValue("/root/dataSet/CURLIST/record/cont_svc_yy")); // 근속년
					model1.setValue("/root/reqData/reqForm/day", model1.getValue("/root/dataSet/CURLIST/record/cont_svc_dd")); // 근속일
				
					model1.setValue("/root/reqData/reqForm/saly_pay_dt", model1.getValue("/root/dataSet/CURLIST/record/year_alon_pay_yymm")); // 연차수당지급년월
					model1.setValue("/root/reqData/reqForm/yymm_alon", model1.getValue("/root/dataSet/CURLIST/record/year_alon_pay_amt")); // 연차수당지급금액
					model1.setValue("/root/reqData/reqForm/avg_saly", model1.getValue("/root/dataSet/CURLIST/record/mm_avg_charg_amt")); // 월평균임금
					model1.setValue("/root/reqData/reqForm/lvcmpy_saly", model1.getValue("/root/dataSet/CURLIST/record/lvcmpy_amt")); // 퇴직금
					model1.setValue("/root/reqData/reqForm/lvcmpy_mm", model1.getValue("/root/dataSet/CURLIST/record/lvcmpy_mm_saly")); // 퇴직월봉
					model1.setValue("/root/reqData/reqForm/ym_avg_saly", model1.getValue("/root/dataSet/CURLIST/record/yymm_alon_1")); // 연월차수당1
					model1.setValue("/root/reqData/reqForm/year_vaca_dds", model1.getValue("/root/dataSet/CURLIST/record/year_cnt_1")); // 연차수1
					model1.setValue("/root/reqData/reqForm/add_vaca_dds", model1.getValue("/root/dataSet/CURLIST/record/duty_cnt_1")); // 가산수1
					model1.setValue("/root/reqData/reqForm/tm_vaca_dds", model1.getValue("/root/dataSet/CURLIST/record/em_cnt_1")); // 사용수1
					model1.setValue("/root/reqData/reqForm/total_vaca_dds", model1.getValue("/root/dataSet/CURLIST/record/yy_alon_use_stot_1")); // 연차수당사용합계1
					model1.setValue("/root/reqData/reqForm/ym_avg_saly2", model1.getValue("/root/dataSet/CURLIST/record/yy_alon_2")); // 연월차수당2
					model1.setValue("/root/reqData/reqForm/year_vaca_dds2", model1.getValue("/root/dataSet/CURLIST/record/year_cnt_2")); // 연차수2
					model1.setValue("/root/reqData/reqForm/add_vaca_dds2", model1.getValue("/root/dataSet/CURLIST/record/duty_cnt_2")); // 가산수2
					model1.setValue("/root/reqData/reqForm/duty_vaca_dds2", model1.getValue("/root/dataSet/CURLIST/record/em_cnt_2")); // 사용수2
					model1.setValue("/root/reqData/reqForm/total_vaca_dds2", model1.getValue("/root/dataSet/CURLIST/record/yy_alon_use_stot_2")); // 연차수당사용합계2
					model1.setValue("/root/reqData/reqForm/vaca_saly", model1.getValue("/root/dataSet/CURLIST/record/un_pay_alon")); // 미지급유급
					model1.setValue("/root/reqData/reqForm/lvcmpy_add_saly", model1.getValue("/root/dataSet/CURLIST/record/lvcmpy_add_amt")); // 퇴직가산금
					model1.setValue("/root/reqData/reqForm/sp_lvcmpy_add_saly", model1.getValue("/root/dataSet/CURLIST/record/nm_lvcmpy_add_amt")); // 명예퇴직가산금
					model1.setValue("/root/reqData/reqForm/mm_saly_1", model1.getValue("/root/dataSet/CURLIST/record/last_mm_saly_1")); // 최종월급여1
					model1.setValue("/root/reqData/reqForm/mm_saly_2", model1.getValue("/root/dataSet/CURLIST/record/last_mm_saly_2")); // 최종월급여1
					model1.setValue("/root/reqData/reqForm/mm_saly_3", model1.getValue("/root/dataSet/CURLIST/record/last_mm_saly_3")); // 최종월급여1
					model1.setValue("/root/reqData/reqForm/mm_saly_4", model1.getValue("/root/dataSet/CURLIST/record/last_mm_saly_4")); // 최종월급여4
					model1.setValue("/root/reqData/reqForm/sum_mm_saly", model1.getValue("/root/dataSet/CURLIST/record/last_mm_saly_add")); // 최종월급합
					model1.setValue("/root/reqData/reqForm/mm_alon_1", model1.getValue("/root/dataSet/CURLIST/record/last_mm_alon_1")); // 유급수당1
					model1.setValue("/root/reqData/reqForm/mm_alon_2", model1.getValue("/root/dataSet/CURLIST/record/last_mm_alon_2")); // 유급수당2
					model1.setValue("/root/reqData/reqForm/mm_alon_3",  model1.getValue("/root/dataSet/CURLIST/record/last_mm_alon_3")); // 유급수당3
					model1.setValue("/root/reqData/reqForm/mm_alon_4",  model1.getValue("/root/dataSet/CURLIST/record/last_mm_alon_4")); // 유급수당4
					model1.setValue("/root/reqData/reqForm/sum_mm_alon", model1.getValue("/root/dataSet/CURLIST/record/last_mm_alon_add")); // 유급수당합
					model1.setValue("/root/reqData/reqForm/temp_vaca_dds", model1.getValue("/root/dataSet/CURLIST/record/em_cnt_1"));
					model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", model1.getValue("/root/dataSet/CURLIST/record/em_cnt_2"));

					model1.removenode("/root/dataSet");
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_dt") != ""){
						//button1.disabled = true;
						//button3.disabled = true;
						//button9.disabled = true;
					}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_dt") == ""){
						//button1.disabled = false;
						//button3.disabled = false;
						//button9.disabled = false;
					}
					if(model1.getValue("/root/reqData/reqForm/emp_no") != ""){
						//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "1"){ 120213
						if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010")
						   ||model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_080")){
							button11.disabled = false;
							button6.disabled = false;
						}
					}else if(model1.getValue("/root/reqData/reqForm/emp_no") == ""){
						//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "2"){ 120213
						if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_020")){
							button11.disabled = true;
							button6.disabled = true;
							//퇴직 DC형  2016.03.16
						}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_060")){
							button11.disabled = true;
							button6.disabled = true;
						}
					}
					//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "2"){ // 정산구분 120213
					// 퇴직 DC형  2016.03.16 추가 
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_020") || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_060") || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_070") ){ // 정산구분
						output9.disabled = true;
						output11.disabled = true;
						output16.disabled = true;
						output17.disabled = true;
						output18.disabled = true;
						output19.disabled = true;
						output20.disabled = true;
						output21.disabled = true;
						output22.disabled = true;
						output9.value = "";
						output11.value = "";
						output16.value = "";
						output17.value = "";
						output18.value = "";
						output19.value = "";
						output20.value = "";
						output21.value = "";
						output22.value = "";
						output10.value = "";
						output12.value = "";
						output13.value = "";
						output14.value = "";
						output15.value = "";
					//}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "1"){ 120213
					}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010") || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_080")){
						output9.disabled = false;
						output11.disabled = false;
						output16.disabled = false;
						output17.disabled = false;
						output18.disabled = false;
						output19.disabled = false;
						output20.disabled = false;
						output21.disabled = false;
						output22.disabled = false;
					}

							
				
					model1.removenode("/root/dataSet");
					/*
					if(model1.getValue("/root/resData/gridData1/record[1]/saly_pay_mm") != ""){
						// 1개월
						model1.setValue("/root/resData/gridData1/record[1]/saly_fr_dt", model1.getValue("/root/resData/gridData1/record[1]/saly_pay_mm").substring(0,6) + "01"); // 시작일
						//model1.setValue("/root/resData/gridData1/record[1]/saly_to_dt", model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt")); // 종료일 최근 1개월
						model1.setValue("/root/resData/gridData1/record[1]/saly_to_dt", model1.getValue("/root/reqData/reqForm/avg_tm_dt1")); // 종료일 최근 1개월
						var input_tm1 = model1.getValue("/root/resData/gridData1/record[1]/saly_pay_mm").substring(0,6) + "01";
						//var input_tm2 = model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt");
						var input_tm2 = model1.getValue("/root/reqData/reqForm/avg_tm_dt1");
						var date_tm1 = new Date(input_tm1.substr(0,4),input_tm1.substr(4,2)-1,input_tm1.substr(6,2));
						var date_tm2 = new Date(input_tm2.substr(0,4),input_tm2.substr(4,2)-1,input_tm2.substr(6,2));
						var interval_temp1 = date_tm2 - date_tm1;
						var day_tm1 = 1000*60*60*24;
						var month_tm1 = day_tm1*30;
						var year_tm1 = month_tm1*12;
						var day_temp1 =  parseInt(interval_temp1/day_tm1); // 기간 날짜수
						model1.setValue("/root/resData/gridData1/record[1]/saly_cnt", Number(day_temp1 + 1));
						/*if(model1.getValue("/root/resData/gridData1/record[1]/saly_to_dt").substring(6,8) == lastday(model1.getValue("/root/reqData/reqForm/avg_tm_dt1").substring(0,4),model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt").substring(5,6))){ // 1개월째가 한달 전체의 근무일때
							// 근무일수로 월봉 구하기
							model1.setValue("/root/resData/gridData1/record[1]/pay_saly", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/pay_saly") /10))*10);
							model1.setValue("/root/resData/gridData1/record[1]/sum_saly2", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/sum_saly2") /10))*10);
							// 근무일수로 유급휴일근무수당 구하기
							model1.setValue("/root/resData/gridData1/record[1]/yymm_alon", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/yymm_alon") /10))*10);
							model1.setValue("/root/resData/gridData1/record[1]/sum_alon2", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/sum_alon2") /10))*10);
						}else if(model1.getValue("/root/resData/gridData1/record[1]/saly_to_dt").substring(6,8) != lastday(model1.getValue("/root/reqData/reqForm/avg_tm_dt1").substring(0,4),model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt").substring(5,6))){ // 1개월째가 한달 전체의 근무일이 아닐때
							// 근무일수로 월봉 구하기
							model1.setValue("/root/resData/gridData1/record[1]/pay_saly", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/pay_saly") / 30 * Number(day_temp1 + 1)/10))*10);
							model1.setValue("/root/resData/gridData1/record[1]/sum_saly2", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/sum_saly2") / 30 * Number(day_temp1 + 1)/10))*10);
							// 근무일수로 유급휴일근무수당 구하기
							model1.setValue("/root/resData/gridData1/record[1]/yymm_alon", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/yymm_alon") / 30 * Number(day_temp1 + 1)/10))*10);
							model1.setValue("/root/resData/gridData1/record[1]/sum_alon2", (Math.round(model1.getValue("/root/resData/gridData1/record[1]/sum_alon2") / 30 * Number(day_temp1 + 1)/10))*10);
						}
						if(model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm") != ""){
							// 2개월
							model1.setValue("/root/resData/gridData1/record[2]/saly_fr_dt", model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm").substring(0,6) + "01"); // 시작일
							model1.setValue("/root/resData/gridData1/record[2]/saly_to_dt", model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm") + 
							commLastDay(model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm"))); // 종료일 최근 2개월
							//lastday(model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm").substring(5,6))); // 종료일 최근 2개월
							var input_tm11 = model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm").substring(0,6) + "01";
							var input_tm22 = model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm") + 
							commLastDay(model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm"));
							//lastday(model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[2]/saly_pay_mm").substring(5,6));
							var date_tm11 = new Date(input_tm11.substr(0,4),input_tm11.substr(4,2)-1,input_tm11.substr(6,2));
							var date_tm22 = new Date(input_tm22.substr(0,4),input_tm22.substr(4,2)-1,input_tm22.substr(6,2));
							var interval_temp11 = date_tm22 - date_tm11;
							var day_tm11 = 1000*60*60*24;
							var month_tm11 = day_tm11*30;
							var year_tm11 = month_tm11*12;
							var day_temp11 =  parseInt(interval_temp11/day_tm11); // 기간 날짜수
							model1.setValue("/root/resData/gridData1/record[2]/saly_cnt", Number(day_temp11 + 1));
							// 근무일수로 월봉 구하기
							//model1.setValue("/root/resData/gridData1/record[2]/pay_saly", (Math.round(model1.getValue("/root/resData/gridData1/record[2]/pay_saly") /10))*10);
							//model1.setValue("/root/resData/gridData1/record[2]/sum_saly2", (Math.round(model1.getValue("/root/resData/gridData1/record[2]/sum_saly2") /10))*10);
							// 근무일수로 유급휴일근무수당 구하기
							//model1.setValue("/root/resData/gridData1/record[2]/yymm_alon", (Math.round(model1.getValue("/root/resData/gridData1/record[2]/yymm_alon") /10))*10);
							//model1.setValue("/root/resData/gridData1/record[2]/sum_alon2", (Math.round(model1.getValue("/root/resData/gridData1/record[2]/sum_alon2") /10))*10);
							
							if(model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm") != ""){ // 4번째 데이터가 있나?
								// 4번째 데이터가 있을 때
								model1.setValue("/root/resData/gridData1/record[3]/saly_fr_dt", model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(0,6) + "01"); // 시작일
								model1.setValue("/root/resData/gridData1/record[3]/saly_to_dt", model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm") + 
								commLastDay(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm"))); // 종료일 최근 2개월
								//lastday(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(5,6))); // 종료일 최근 2개월
								var input_tm111 = model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(0,6) + "01";
								var input_tm222 = model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm") + 
								commLastDay(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm"));
								//lastday(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(5,6));
								var date_tm111 = new Date(input_tm111.substr(0,4),input_tm111.substr(4,2)-1,input_tm111.substr(6,2));
								var date_tm222 = new Date(input_tm222.substr(0,4),input_tm222.substr(4,2)-1,input_tm222.substr(6,2));
								var interval_temp111 = date_tm222 - date_tm111;
								var day_tm111 = 1000*60*60*24;
								var month_tm111 = day_tm111*30;
								var year_tm111 = month_tm111*12;
								var day_temp111 =  parseInt(interval_temp111/day_tm111); // 기간 날짜수
								model1.setValue("/root/resData/gridData1/record[3]/saly_cnt", Number(day_temp111 + 1));
								// 근무일수로 월봉 구하기
								//model1.setValue("/root/resData/gridData1/record[3]/pay_saly", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/pay_saly") /10))*10);
								//model1.setValue("/root/resData/gridData1/record[3]/sum_saly2", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/sum_saly2") /10))*10);
								// 근무일수로 유급휴일근무수당 구하기
								//model1.setValue("/root/resData/gridData1/record[3]/yymm_alon", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/yymm_alon") /10))*10);
								//model1.setValue("/root/resData/gridData1/record[3]/sum_alon2", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/sum_alon2") /10))*10);
								
								model1.setValue("/root/resData/gridData1/record[4]/saly_fr_dt", mt_tm); // 시작일
								model1.setValue("/root/resData/gridData1/record[4]/saly_to_dt", model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm") + 
								commLastDay(model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm"))); // 종료일 최근 3개월
								//lastday(model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm").substring(5,6))); // 종료일 최근 3개월
								var input_tm1111 = mt_tm;
								var input_tm2222 = model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm") + 
								commLastDay(model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm"));
								//lastday(model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm").substring(5,6));
								var date_tm1111 = new Date(input_tm1111.substr(0,4),input_tm1111.substr(4,2)-1,input_tm1111.substr(6,2));
								var date_tm2222 = new Date(input_tm2222.substr(0,4),input_tm2222.substr(4,2)-1,input_tm2222.substr(6,2));
								var interval_temp1111 = date_tm2222 - date_tm1111;
								var day_tm1111 = 1000*60*60*24;
								var month_tm1111 = day_tm1111*30;
								var year_tm1111 = month_tm1111*12;
								var day_temp1111 =  parseInt(interval_temp1111/day_tm1111); // 기간 날짜수
								model1.setValue("/root/resData/gridData1/record[4]/saly_cnt", Number(day_temp1111 + 1));
								// 근무일수로 월봉 구하기
								//model1.setValue("/root/resData/gridData1/record[4]/pay_saly", (Math.round(model1.getValue("/root/resData/gridData1/record[4]/pay_saly") / 30 * Number(day_temp1111 + 1)/10))*10);
								//model1.setValue("/root/resData/gridData1/record[4]/sum_saly2", (Math.round(model1.getValue("/root/resData/gridData1/record[4]/sum_saly2") / 30 * Number(day_temp1111 + 1)/10))*10);
								// 근무일수로 유급휴일근무수당 구하기
								//model1.setValue("/root/resData/gridData1/record[4]/yymm_alon", (Math.round(model1.getValue("/root/resData/gridData1/record[4]/yymm_alon") / 30 * Number(day_temp1111 + 1)/10))*10);
								//model1.setValue("/root/resData/gridData1/record[4]/sum_alon2", (Math.round(model1.getValue("/root/resData/gridData1/record[4]/sum_alon2") / 30 * Number(day_temp1111 + 1)/10))*10);
								
							}else if(model1.getValue("/root/resData/gridData1/record[4]/saly_pay_mm") == ""){
								if(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm") == ""){
								}else if(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm") != ""){
									// 4번째 데이터가 없을 때
									model1.setValue("/root/resData/gridData1/record[3]/saly_fr_dt", mt_tm); // 시작일
									model1.setValue("/root/resData/gridData1/record[3]/saly_to_dt", model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm") + 
									commLastDay(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm"))); // 종료일 최근 3개월
									//lastday(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(5,6))); // 종료일 최근 3개월
									var input_tm111 = mt_tm;
									var input_tm222 = model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm") + 
									commLastDay(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm"));
									//lastday(model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(0,4), model1.getValue("/root/resData/gridData1/record[3]/saly_pay_mm").substring(5,6));
									var date_tm111 = new Date(input_tm111.substr(0,4),input_tm111.substr(4,2)-1,input_tm111.substr(6,2));
									var date_tm222 = new Date(input_tm222.substr(0,4),input_tm222.substr(4,2)-1,input_tm222.substr(6,2));
									var interval_temp111 = date_tm222 - date_tm111;
									var day_tm111 = 1000*60*60*24;
									var month_tm111 = day_tm111*30;
									var year_tm111 = month_tm111*12;
									var day_temp111 =  parseInt(interval_temp111/day_tm111); // 기간 날짜수
									model1.setValue("/root/resData/gridData1/record[3]/saly_cnt", Number(day_temp111 + 1));
									// 근무일수로 월봉 구하기
									//model1.setValue("/root/resData/gridData1/record[3]/pay_saly", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/pay_saly") /10))*10);
									//model1.setValue("/root/resData/gridData1/record[3]/sum_saly2", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/sum_saly2") /10))*10);
									// 근무일수로 유급휴일근무수당 구하기
									//model1.setValue("/root/resData/gridData1/record[3]/yymm_alon", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/yymm_alon") /10))*10);
									//model1.setValue("/root/resData/gridData1/record[3]/sum_alon2", (Math.round(model1.getValue("/root/resData/gridData1/record[3]/sum_alon2") /10))*10);
								}
							}
						}
					}
					*/
					button9.disabled = false;
					//20090930
					button3.disabled = false;
					
					model1.setValue("/root/reqData/reqForm/tm_vaca_dds2","");
					
					model1.refresh();
								
				    // 월봉 및 유급휴일수당, 연차수당의 합계를 계산  
					var sum_total_saly1 =  0  ;
					var sum_total_saly2 =  0  ;
					var sum_total_hody1 =  0  ;
					var sum_total_hody2 =  0  ;
					var sum_total_yymm1 =  0  ;
					var sum_total_yymm2 =  0  ;
					
					for(var i= 1; i<datagrid1.rows; i++){
						  sum_total_saly1 = sum_total_saly1 + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly1")) ; 
						  sum_total_saly2 = sum_total_saly2 + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly2")) ;    
						  sum_total_hody1 = sum_total_hody1 + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon1")) ; 
						  sum_total_hody2 = sum_total_hody2 + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon2")) ;   
						  sum_total_yymm1 = sum_total_yymm1 + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon1")) ; 
						  sum_total_yymm2 = sum_total_yymm2 + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon2")) ; 
					}	
					
				   model1.setValue("/root/resData/gridData2/record[1]/sum_total_saly1", sum_total_saly1);
				   model1.setValue("/root/resData/gridData2/record[1]/sum_total_saly2", sum_total_saly2);    
				   model1.setValue("/root/resData/gridData2/record[1]/sum_total_hody1", sum_total_hody1);
				   model1.setValue("/root/resData/gridData2/record[1]/sum_total_hody2", sum_total_hody2);      
				   model1.setValue("/root/resData/gridData2/record[1]/sum_total_yymm1", sum_total_yymm1);
				   model1.setValue("/root/resData/gridData2/record[1]/sum_total_yymm2", sum_total_yymm2);   
				
				  datagrid2.refresh();
				}
				function goSearch(emp_no){
					model1.setValue("/root/reqData/join_tm", "");
					model1.setValue("/root/reqData/searchData/emp_no", emp_no);
					model1.send("hd_lvcmpy_1101");
					model1.setValue("/root/reqData/reqForm/emp_no", model1.getValue("/root/dataSet/CURLIST/record/emp_no"));
					model1.setValue("/root/reqData/reqForm/dept_cd", model1.getValue("/root/dataSet/CURLIST/record/dept_cd"));
					model1.setValue("/root/reqData/reqForm/dept_nm", model1.getValue("/root/dataSet/CURLIST/record/dept_nm"));
					model1.setValue("/root/reqData/reqForm/in_cmpy_dt", model1.getValue("/root/dataSet/CURLIST/record/in_cmpy_dt"));
					model1.setValue("/root/reqData/reqForm/last_midl_adjm_dt", model1.getValue("/root/dataSet/CURLIST/record/last_midl_adjm_dt"));
					model1.setValue("/root/reqData/reqForm/lvcmpy_dt", model1.getValue("/root/dataSet/CURLIST/record/lvcmpy_dt"));
					model1.setValue("/root/reqData/reqForm/nm_korn", model1.getValue("/root/dataSet/CURLIST/record/nm_korn"));
					model1.removenode("/root/dataSet");
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_dt") != ""){
						//button1.disabled = true;
						//button3.disabled = true;
						//button9.disabled = true;
					}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_dt") == ""){
						//button1.disabled = false;
						//button3.disabled = false;
						//button9.disabled = false;
					}
					if(model1.getValue("/root/reqData/reqForm/emp_no") != ""){
						//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "1"){ 120213
						if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010")){
							button11.disabled = false;
							button6.disabled = false;
						}
					}else if(model1.getValue("/root/reqData/reqForm/emp_no") == ""){
						//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "2"){ 120213
						if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_020") 
						    || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_060")  ){ // 2016.03.16 퇴직DC형 추가 
							button11.disabled = true;
							button6.disabled = true;
						}
					}

					if(model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt") != ""){
						var input1 = model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt").substring(0,4) + '-' +
								model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt").substring(4,6) + '-' +
								model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt").substring(6,8);
						var input2 = "1";
						var dateinfo = input1.split("-");
						var src = new Date(dateinfo[0], dateinfo[1]-1, dateinfo[2]);
						src.setDate(src.getDate() + parseInt(input2));
						var year = src.getYear();
						var month = src.getMonth() + 1;
						var date = src.getDate();
						var month_tm = '0' + month;
						var day_tm = '0' + date;  
						if(month_tm.length == 3){
							month_tm = month_tm.substring(1, 3);
						}
						if(day_tm.length == 3){
							day_tm = day_tm.substring(1, 3);
						}
						var result = year + month_tm + day_tm;
						model1.setValue("/root/reqData/reqForm/in_cmpy_tm_dt", result);
						//model1.setValue("/root/reqData/reqForm/in_cmpy_tm_dt", model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt"));
					}else if((model1.getValue("/root/reqData/reqForm/in_cmpy_dt") != "") && (model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt") == "")){
						/*var input1 = model1.getValue("/root/reqData/reqForm/in_cmpy_dt").substring(0,4) + '-' +
								model1.getValue("/root/reqData/reqForm/in_cmpy_dt").substring(4,6) + '-' +
								model1.getValue("/root/reqData/reqForm/in_cmpy_dt").substring(6,8);
						var input2 = "1";
						var dateinfo = input1.split("-");
						var src = new Date(dateinfo[0], dateinfo[1]-1, dateinfo[2]);
						src.setDate(src.getDate() + parseInt(input2));
						var year = src.getYear();
						var month = src.getMonth() + 1;
						var date = src.getDate();
						var month_tm = '0' + month;
						var day_tm = '0' + date;  
						if(month_tm.length == 3){
							month_tm = month_tm.substring(1, 3);
						}
						if(day_tm.length == 3){
							day_tm = day_tm.substring(1, 3);
						}
						var result = year + month_tm + day_tm;
						model1.setValue("/root/reqData/reqForm/in_cmpy_tm_dt", result);*/
						model1.setValue("/root/reqData/reqForm/in_cmpy_tm_dt", model1.getValue("/root/reqData/reqForm/in_cmpy_dt"));
					}
				}
				
				function vaca_saly_fn(){
					// 미지급 연차수당
					model1.send("hd_lvcmpy_1007");
					model1.setValue("/root/reqData/reqForm/year_vaca_dds", model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")); // 연차수
					model1.setValue("/root/reqData/reqForm/add_vaca_dds", model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")); // 가산수
					model1.setValue("/root/reqData/reqForm/use_vaca_dds", model1.getValue("/root/dataSet/CURLIST2/record/use_vaca_dds")); // 사용
					model1.setValue("/root/reqData/reqForm/duty_vaca_dds", model1.getValue("/root/dataSet/CURLIST2/record/duty_vaca_dds")); // 의무
					model1.setValue("/root/reqData/reqForm/tm_vaca_dds", model1.getValue("/root/dataSet/CURLIST2/record/use_vaca_dds") + 
					" ( " + model1.getValue("/root/dataSet/CURLIST2/record/duty_vaca_dds") +" )"); // 사용(의무);
				
					var use = model1.getValue("/root/dataSet/CURLIST2/record/use_vaca_dds");
					var duty = model1.getValue("/root/dataSet/CURLIST2/record/duty_vaca_dds");
					var cmpy_cd = getProperty("ss_cmpycd");  //2013.07.02

					// 사용일수와 의무일수를 비교
				//	alert( "use " +  Number(use)  + " duty  "+Number(duty));
					if(Number(use) <= Number(duty)){ // 의무일수가 많을경우
						if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - duty < 0){
							model1.setValue("/root/reqData/reqForm/total_vaca_dds", "0");
						}else if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - duty >= 0){
							model1.setValue("/root/reqData/reqForm/total_vaca_dds", 
							Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - duty);
						}
						if(duty > 11){
							//model1.setValue("/root/reqData/reqForm/temp_vaca_dds", "11");
							model1.setValue("/root/reqData/reqForm/temp_vaca_dds", duty);
					//		alert("duty " + duty );  
						}
						//}else if(duty < 12){
						if(duty < 12){
							model1.setValue("/root/reqData/reqForm/temp_vaca_dds", model1.getValue("/root/reqData/reqForm/year_vaca_dds"));
				//			alert("ear_vaca_dds  "+ model1.getValue("/root/reqData/reqForm/year_vaca_dds") );
						}
						if(Number(use)  == "0")
						{
							if(use < 12)
							{
								if(cmpy_cd  ==  "500" || cmpy_cd  ==  "550") // 오인성 과장 요청 tv 조선일 경우 사용 휴가가 의무 휴가 보다 작아도  사용 휴가를 설정 한다. 2014.02.25 수정  2016.09.01 미디어랩도 tv조선과 같은 방식으로 변경(김명안 차장 요청)
								{
									model1.setValue("/root/reqData/reqForm/temp_vaca_dds",use); 
								}
								else
								{
									model1.setValue("/root/reqData/reqForm/temp_vaca_dds", model1.getValue("/root/reqData/reqForm/year_vaca_dds"));
								}
							}
						}
					}else if(Number(duty) <= Number(use)){ // 사용일수가 많을경우
						if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - use < 0){
							model1.setValue("/root/reqData/reqForm/total_vaca_dds", "0");
						}else if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - use >= 0){
							model1.setValue("/root/reqData/reqForm/total_vaca_dds", 
							Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - use);
						}
						if(use > 11){
							//model1.setValue("/root/reqData/reqForm/temp_vaca_dds", "11");
							model1.setValue("/root/reqData/reqForm/temp_vaca_dds", use);
						}
						//}else if(use < 12){
						if(use < 12){
							if(cmpy_cd  ==  "500" || cmpy_cd  ==  "550") // 오인성 과장 요청 tv 조선일 경우 사용 휴가가 의무 휴가 보다 작아도  사용 휴가를 설정 한다. 2014.02.25 수정  2016.09.01 미디어랩도 tv조선과 같은 방식으로 변경(김명안 차장 요청)
							{
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds",use); 
							}
							else
							{
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds", model1.getValue("/root/reqData/reqForm/year_vaca_dds"));
							}
						}
					}
					
						 //  	 model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_030", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_030"));
				   
					var ym_avg_saly = 0 ;
					
					
					if(cmpy_cd == "500") 
					{
					
						// (기본급/226) * 8
						ym_avg_saly =  ((Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) / 226 )  * 8) // 통상임금 
										* Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds"))    ; 
						  
					}else if(cmpy_cd == "550"){					
						//미디어렙 미지급연차수당 계산식 tv조선과 동일하게 적용_20160415
						ym_avg_saly =  ((Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) / 226 )  * 8) // 통상임금 
										* Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds"))    ; 						  
					}
					else 
					{
				    //var ym_avg_saly = (Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) * Number(0.43) + Number(model1.getValue("/root/dataSet/CURLIST1/record/posk_saly")))
					     ym_avg_saly = (Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) * Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_040")) + (Number(model1.getValue("/root/dataSet/CURLIST1/record/posk_saly"))* Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_050")) ))
					//     * Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds")) * Number(1)/Number(23);
							* Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds")) * Number(1)/Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_030")); 
					}		     
					
					
					
					if(cmpy_cd == "100") 
					{
					  model1.setValue("/root/reqData/reqForm/ym_avg_saly", (Math.round(ym_avg_saly/1000))*1000); // 연차수당
					}else{
						model1.setValue("/root/reqData/reqForm/ym_avg_saly", (Math.round(ym_avg_saly/100))*100); // 연차수당
					}
					model1.setValue("/root/reqData/reqForm/base_saly",model1.getValue("/root/dataSet/CURLIST1/record/base_saly"));
					model1.setValue("/root/reqData/reqForm/posk_saly",model1.getValue("/root/dataSet/CURLIST1/record/posk_saly"));
					model1.removenode("/root/dataSet");
					model1.refresh();
					
					// 미지급 연차수당2
					var lvcmpy_tm_dt = model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt");
					
					if(lvcmpy_tm_dt.substr(4,4) > "1101") {
						//alert("@@@1");
						model1.send("hd_lvcmpy_1017");
						model1.setValue("/root/reqData/reqForm/year_vaca_dds2", model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")); // 연차수
						model1.setValue("/root/reqData/reqForm/add_vaca_dds2", model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")); // 가산수
						model1.setValue("/root/reqData/reqForm/use_vaca_dds2", model1.getValue("/root/dataSet/CURLIST2/record/use_vaca_dds")); // 사용
						model1.setValue("/root/reqData/reqForm/duty_vaca_dds2", model1.getValue("/root/dataSet/CURLIST2/record/duty_vaca_dds")); // 의무
						model1.setValue("/root/reqData/reqForm/tm_vaca_dds2", model1.getValue("/root/dataSet/CURLIST2/record/use_vaca_dds")); // 사용(의무);
						
						vaca_saly_fn_rqv();
						
					}
					
				}
				function vaca_saly_fn_rqv(){
					var use = model1.getValue("/root/reqData/reqForm/tm_vaca_dds2");
						var duty = model1.getValue("/root/reqData/reqForm/duty_vaca_dds2");
						// 사용일수와 의무일수를 비교
						if(Number(use) <= Number(duty)){ // 의무일수가 많을경우
							if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - duty < 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", "0");
							}else if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - duty >= 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", 
								Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - duty);
							}
							if(duty > 11){
								//model1.setValue("/root/reqData/reqForm/temp_vaca_dds", "11");
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", duty);
							}
							//}else if(duty < 12){
							if(duty < 12){
								//alert(model1.getValue("/root/reqData/reqForm/year_vaca_dds2"));
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", model1.getValue("/root/reqData/reqForm/year_vaca_dds2"));
							}
						}else if(Number(duty) <= Number(use)){ // 사용일수가 많을경우
							if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - use < 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", "0");
							}else if(Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - use >= 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", 
								Number(model1.getValue("/root/dataSet/CURLIST2/record/year_vaca_dds")) + Number(model1.getValue("/root/dataSet/CURLIST2/record/add_vaca_dds")) - use);
							}
							if(use > 11){
								//model1.setValue("/root/reqData/reqForm/temp_vaca_dds", "11");
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", use);
							}
							//}else if(use < 12){
							if(use < 12){
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", model1.getValue("/root/reqData/reqForm/year_vaca_dds2"));
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", use);
							}
						}
						
						var cmpy_cd = getProperty("ss_cmpycd");  //2013.01.09 수정  윤세영 대리님 요청으로 수동으로 입력 가능 하게 
						var ym_avg_saly = 0 ;
						
					    if(cmpy_cd == "500") 
					    {  
							ym_avg_saly =  ((Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) / 226 )  * 8) // 통상임금 
										 * Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds2"))  ; 
							
						}else if(cmpy_cd == "550"){
							//미디어렙 미지급연차수당 계산식 tv조선과 동일하게 적용_20160415
							ym_avg_saly =  ((Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) / 226 )  * 8) // 통상임금 
										 * Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds2"))  ; 
							
						}
						else 
						{
							ym_avg_saly = (Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) * Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_040")) + (Number(model1.getValue("/root/dataSet/CURLIST1/record/posk_saly"))*Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_050"))))  //0.43 ->  model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_040") 수정  
										 * Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds2")) * Number(1)/Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_030"));  //23 -->model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_030") 수정 
						}
						
						//ym_avg_saly = model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_040");
	
						if(cmpy_cd == "100") 
					    {  
							model1.setValue("/root/reqData/reqForm/ym_avg_saly2", (Math.round(ym_avg_saly/1000))*1000); // 연차수당	
						}
						else
						{
							model1.setValue("/root/reqData/reqForm/ym_avg_saly2", (Math.round(ym_avg_saly/100))*100); // 연차수당
						}
						model1.removenode("/root/dataSet");
						model1.refresh();
					
				}
				
				function vaca_saly_fn_rqv2(){
					var use = model1.getValue("/root/reqData/reqForm/tm_vaca_dds2");
						var duty = model1.getValue("/root/reqData/reqForm/duty_vaca_dds2");
						//alert(use+"$$$$"+duty);
						// 사용일수와 의무일수를 비교
						
						if(Number(use) <= Number(duty)){ // 의무일수가 많을경우
							if(Number(model1.getValue("/root/reqData/reqForm/year_vaca_dds2")) + Number(model1.getValue("/root/reqData/reqForm/add_vaca_dds2")) - duty < 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", "0");
							}else if(Number(model1.getValue("/root/reqData/reqForm/year_vaca_dds2")) + Number(model1.getValue("/root/reqData/reqForm/add_vaca_dds2")) - duty >= 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", 
								Number(model1.getValue("/root/reqData/reqForm/year_vaca_dds2")) + Number(model1.getValue("/root/reqData/reqForm/add_vaca_dds2")) - duty);
							}
							if(duty > 11){
								//model1.setValue("/root/reqData/reqForm/temp_vaca_dds", "11");
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", duty);
							}
							//}else if(duty < 12){
							if(duty < 12){
								//alert(model1.getValue("/root/reqData/reqForm/year_vaca_dds2"));
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", model1.getValue("/root/reqData/reqForm/year_vaca_dds2"));
							}
						}else if(Number(duty) <= Number(use)){ // 사용일수가 많을경우
						
							if(Number(model1.getValue("/root/reqData/reqForm/year_vaca_dds2")) + Number(model1.getValue("/root/reqData/reqForm/add_vaca_dds2")) - use < 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", "0");
							}else if(Number(model1.getValue("/root/reqData/reqForm/year_vaca_dds2")) + Number(model1.getValue("/root/reqData/reqForm/add_vaca_dds2")) - use >= 0){
								model1.setValue("/root/reqData/reqForm/total_vaca_dds2", 
								Number(model1.getValue("/root/reqData/reqForm/year_vaca_dds2")) + Number(model1.getValue("/root/reqData/reqForm/add_vaca_dds2")) - use);
							}
							if(use > 11){
								//model1.setValue("/root/reqData/reqForm/temp_vaca_dds", "11");
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", use);
							}
							//}else if(use < 12){
							if(use < 12){
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", model1.getValue("/root/reqData/reqForm/year_vaca_dds2"));
								model1.setValue("/root/reqData/reqForm/temp_vaca_dds2", use);
							}
						}
						var cmpy_cd = getProperty("ss_cmpycd");  //2013.01.09 수정  윤세영 대리님 요청으로 수동으로 입력 가능 하게 
							
						var ym_avg_saly = 0 ;
						
						if(cmpy_cd == "500") 
					    {
							ym_avg_saly =  ((Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) / 226 )  * 8) // 통상임금 
										 * Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds2"))  ; 
					    }else if(cmpy_cd == "550"){
							//미디어렙 미지급연차수당 계산식 tv조선과 동일하게 적용_20160415
							ym_avg_saly =  ((Number(model1.getValue("/root/dataSet/CURLIST1/record/base_saly")) / 226 )  * 8) // 통상임금 
										 * Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds2"))  ; 
					    }
						else 
						{
							ym_avg_saly = (Number(model1.getValue("/root/reqData/reqForm/base_saly")) * Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_040")) + (Number(model1.getValue("/root/reqData/reqForm/posk_saly"))* Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_050"))))
										 * Number(model1.getValue("/root/reqData/reqForm/total_vaca_dds2")) * Number(1)/Number(model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_030"));
						}
					
				
					    if(cmpy_cd == "500") 
					    {
				      		model1.setValue("/root/reqData/reqForm/ym_avg_saly2", (Math.round(ym_avg_saly/100))*100); // 연차수당
				       	}
						else if(cmpy_cd="100")
						{
							model1.setValue("/root/reqData/reqForm/ym_avg_saly2", (Math.round(ym_avg_saly/1000))*1000); // 연차수당
						}
						
						model1.removenode("/root/dataSet");
						model1.refresh();
					
				}
				
				]]>
			</script>
			<script type="javascript" ev:event="xforms-ready">
				<![CDATA[
				var clsf_030;
				
				model1.send("hd_lvcmpy_1100");
				model1.copyNode("/root/initData/comboSet/lvcmpy_clsf", "/root/dataSet/CURLIST");
				model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_010", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_010"));
				model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_020", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_020"));
				model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_060", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_060")); // 2016.03.16 추가 퇴직DC형 
				model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_070", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_070")); // 2016.11.16 추가 DC형중간 
				model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_080", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_080")); // 2016.11.16 추가 퇴직DC형  
			   	 model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_030", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_030"));
				 model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_040", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_040"));
				 model1.setValue("/root/initData/comboSet/xx_lvcmpy_clsf_050", model1.getValue("/root/dataSet/xx_lvcmpy_clsf_050")); 
 
				clsf_030  = model1.getValue("/root/dataSet/xx_lvcmpy_clsf_030") ; 
				model1.removenode("/root/dataSet");
				//combo1.value = "1"; 120213
				
				var cmpy_cd = getProperty("ss_cmpycd");  //2013.01.09 수정  윤세영 대리님 요청으로 수동으로 입력 가능 하게 
													
				if(cmpy_cd == "500"){
					caption44.value = "미지급연차수당 = 통상임금 * (연차 + 가산 - 사용의무)";
				}else if(cmpy_cd == "550"){
					//미디어렙 문구추가_20160415
					caption44.value = "미지급연차수당 = 통상임금 * (연차 + 가산 - 사용의무)";
				}else{
					caption44.value = "미지급연차수당 = 월통상임금* (연차 + 가산 - 사용의무)*1/"+clsf_030  ;
				}
					
				combo1.value = model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010");
				button11.disabled = true;
				button6.disabled = true;
				button3.disabled = true;
				button3.disabled = true;
				button3.disabled = true;
				button3.disabled = true;
				button9.disabled = true;
				//button1.disabled = true;
				//button3.disabled = true;
				//button9.disabled = true;
				combo1.select(0);
				model1.refresh();
				]]>
			</script>
			<submission id="hd_lvcmpy_1002" action="/hd/lvcmpy/1002" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData/cmpy_dt" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1003" action="/hd/lvcmpy/1003" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/reqForm/avg_tm_dt1" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1006" action="/hd/lvcmpy/1006" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1007" action="/hd/lvcmpy/1007" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1011" action="/hd/lvcmpy/1011" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/reqForm" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1017" action="/hd/lvcmpy/1017" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1018" action="/hd/lvcmpy/1018" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData1" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1104" action="/hd/lvcmpy/1104" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/reqForm" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1100" action="/hd/lvcmpy/1100" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/initData/hd_lvcmpy_1100/dataSet/type_clsf" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1101" action="/hd/lvcmpy/1101" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData/emp_no" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1105" action="/hd/lvcmpy/1105" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData" resultref="/root/tempData"/>
			<submission id="hd_lvcmpy_1109" action="/hd/lvcmpy/1109" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData_tm" resultref="/root/tempData"/>
		</model>
		<script type="javascript" src="/js/CIISComm.js"/>
	</xhtml:head>
	<xhtml:body class="main" pagewidth="946" pageheight="728" guideline="2,34;2,826;1,935;1,928;1,926;2,276;" style="font-family:굴림; background-image:../../images/bg_946.gif; ">
		<import id="iv_Title" src="../../../common/xrw/iv_TitleBar.xrw" style="left:10px; top:5px; width:926px; height:29px; "/>
		<group id="group1" style="left:10px; top:65px; width:926px; height:30px; ">
			<caption id="caption2" class="list_cap01" style="left:0px; top:0px; width:90px; height:26px; text-align:center; ">정산구분</caption>
			<caption id="caption10" class="list_cap02" style="left:89px; top:0px; width:837px; height:26px; text-align:center; "/>
			<caption id="caption5" class="list_cap01" style="left:195px; top:0px; width:130px; height:26px; text-align:center; ">퇴직(중간정산)예정일</caption>
			<select1 id="combo1" ref="/root/reqData/reqForm/lvcmpy_clsf" class="req" navindex="1" appearance="minimal" style="left:93px; top:4px; width:100px; height:18px; ">
				<choices>
					<itemset nodeset="/root/initData/comboSet/lvcmpy_clsf/item">
						<label ref="cd_abrv_nm"/>
						<value ref="cd"/>
					</itemset>
				</choices>
				<script type="javascript" ev:event="xforms-value-changed">
					<![CDATA[
					//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "2"){ 120213
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_020")
					  ||model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_060")
					 ||model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_070")  ){ //2016.03.16 퇴직DC형 추가 
						button11.disabled = true;
						button6.disabled = true;
					}
					if(model1.getValue("/root/reqData/reqForm/emp_no") != ""){
						//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "1"){ 120213
						if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010") || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_080")){ 
							button11.disabled = false;
							button6.disabled = false;
						}
					}
					//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "2"){ // 정산구분 120213
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_020")
					   ||model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_060") 
					||model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_070")   ){ // 정산구분  // 2016.03.16 퇴직DC형 추가 
						output9.disabled = true;
						output11.disabled = true;
						output16.disabled = true;
						output17.disabled = true;
						output18.disabled = true;
						output19.disabled = true;
						output20.disabled = true;
						output21.disabled = true;
						output22.disabled = true;
						output9.value = "";
						output11.value = "";
						output16.value = "";
						output17.value = "";
						output18.value = "";
						output19.value = "";
						output20.value = "";
						output21.value = "";
						output22.value = "";
						output10.value = "";
						output12.value = "";
						output13.value = "";
						output14.value = "";
						output15.value = "";
					//}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "1"){ 120213
					}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010") 
					          ||model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_080"))
				    {
						output9.disabled = false;
						output11.disabled = false;
						output16.disabled = false;
						output17.disabled = false;
						output18.disabled = false;
						output19.disabled = false;
						output20.disabled = false;
						output21.disabled = false;
						output22.disabled = false;
					}
					]]>
				</script>
			</select1>
			<input id="input1" ref="/root/reqData/reqForm/lvcmpy_tm_dt" class="req" navindex="2" inputtype="date" maxlength="8" format="yyyy-mm-dd" style="left:328px; top:4px; width:100px; height:18px; ">
				<script type="javascript" ev:event="xforms-value-changed">
					<![CDATA[
					model1.setValue("/root/reqData/reqForm/avg_tm_dt1", model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt"));
					model1.setValue("/root/reqData/reqForm/avg_tm_dt2", model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt"));
					input2.refresh();
					input5.refresh();
					]]>
				</script>
			</input>
			<caption id="caption1" class="list_cap01" style="left:431px; top:0px; width:130px; height:26px; text-align:center; ">계산기준일</caption>
			<input id="input2" ref="/root/reqData/reqForm/avg_tm_dt1" class="req" inputtype="date" format="yyyy-mm-dd" style="left:564px; top:4px; width:100px; height:18px; ">
				<script type="javascript" ev:event="xforms-value-changed">
					<![CDATA[
					model1.setValue("/root/reqData/reqForm/avg_tm_dt2", model1.getValue("/root/reqData/reqForm/avg_tm_dt1"));
					input5.refresh();
					]]>
				</script>
			</input>
		</group>
		<group id="group3" style="left:10px; top:94px; width:926px; height:51px; ">
			<caption id="caption3" class="list_cap01" style="left:0px; top:0px; width:90px; height:26px; text-align:center; ">사원</caption>
			<caption id="caption4" class="list_cap02" style="left:89px; top:0px; width:837px; height:26px; text-align:center; "/>
			<caption id="caption8" class="list_cap01" style="left:0px; top:25px; width:90px; height:26px; text-align:center; ">입사일</caption>
			<caption id="caption11" class="list_cap02" style="left:89px; top:25px; width:837px; height:26px; text-align:center; "/>
			<input id="input3" ref="/root/reqData/reqForm/emp_no" class="req" navindex="3" inputtype="button" maxlength="6" style="left:93px; top:4px; width:100px; height:18px; ">
				<script type="javascript" ev:event="onbuttonclick">
					<![CDATA[
						model.removeNodeset("/root/reqData/fwdData");  
						model.makeNode("/root/reqData/fwdData/func_nm");
						model.setValue("/root/reqData/fwdData/func_nm", "setEmp_no");
						window.load("/xrw/hd/com/HD_COM_1000.xrw","mdichild", "hd_com_1000", "align:center; caption:hidden;", "/root/reqData/fwdData", "/root/reqData/fwdData");
					]]>
				</script>
				<script type="javascript" ev:event="onkeypress">
					<![CDATA[
						if (event.keyCode ==13){
							model1.setValue("/root/reqData/searchData/emp_no", input3.currentText);
							//setEmp_no(input3.currentText);
							var emp_no = input3.currentText;
							model1.setValue("/root/reqData/searchData/emp_no", emp_no);
							model1.setValue("/root/reqData/searchData/nm_korn", "");
							setInfoSearchInput(emp_no, "", "", "setEmp_no"); // 사번, 성명, 주민번호
							if(model1.getValue("/root/tempData/totalcnt") != 1){
								return;
							} // 카운트
							model1.removenode("/root/tempData");
							goSearch(emp_no);
							model1.refresh();
						}
					]]>
				</script>
				<script type="javascript" ev:event="onmaxlength">
					<![CDATA[
							model1.setValue("/root/reqData/searchData/emp_no", input3.currentText);
							//setEmp_no(input3.currentText);
							var emp_no = input3.currentText;
							model1.setValue("/root/reqData/searchData/emp_no", emp_no);
							model1.setValue("/root/reqData/searchData/nm_korn", "");
							setInfoSearchInput(emp_no, "", "", "setEmp_no"); // 사번, 성명, 주민번호
							if(model1.getValue("/root/tempData/totalcnt") != 1){
								return;
							} // 카운트
							model1.removenode("/root/tempData");
							goSearch(emp_no);
							model1.refresh();
					]]>
				</script>
			</input>
			<input id="output1" ref="/root/reqData/reqForm/nm_korn" imemode="hangul" style="left:196px; top:4px; width:100px; height:18px; ">
				<script type="javascript" ev:event="onkeypress">
					<![CDATA[
						if (event.keyCode ==13){
							model1.setValue("/root/reqData/searchData/nm_korn", output1.currentText);
							//setEmp_no(input3.currentText);
							var nm_korn = output1.currentText;
							model1.setValue("/root/reqData/searchData/emp_no", "");
							model1.setValue("/root/reqData/searchData/nm_korn", nm_korn);
							setInfoSearchInput("", nm_korn, "", "setEmp_no"); // 사번, 성명, 주민번호
							if(model1.getValue("/root/tempData/totalcnt") != 1){
								return;
							} // 카운트
							var emp = model.getValue("/root/tempData/emp_no");
							var nm = model.getValue("/root/tempData/nm_korn");
							model1.removenode("/root/tempData");
							goSearch(emp);
							model1.refresh();
						}
					]]>
				</script>
			</input>
			<caption id="caption6" class="list_cap01" style="left:324px; top:0px; width:90px; height:26px; text-align:center; ">부서</caption>
			<output id="output2" ref="/root/reqData/reqForm/dept_nm" style="left:417px; top:4px; width:163px; height:18px; "/>
			<output id="output3" ref="/root/reqData/reqForm/in_cmpy_dt" format="yyyy-mm-dd" style="left:93px; top:29px; width:100px; height:18px; "/>
			<caption id="caption7" class="list_cap01" style="left:195px; top:25px; width:90px; height:26px; text-align:center; ">중간정산일</caption>
			<output id="output4" ref="/root/reqData/reqForm/last_midl_adjm_dt" format="yyyy-mm-dd" style="left:287px; top:29px; width:100px; height:18px; "/>
			<caption id="caption12" class="list_cap01" style="left:389px; top:25px; width:90px; height:26px; text-align:center; ">퇴직일</caption>
			<output id="output5" ref="/root/reqData/reqForm/lvcmpy_dt" format="yyyy-mm-dd" style="left:481px; top:29px; width:100px; height:18px; "/>
		</group>
		<group id="group4" style="left:10px; top:149px; width:926px; height:46px; ">
			<caption id="caption16" class="list_cap02" style="left:0px; top:20px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption13" class="tit02" style="left:0px; top:0px; width:205px; height:20px; font-weight:bold; ">퇴직금 산정기간</caption>
			<input id="input4" ref="/root/reqData/reqForm/in_cmpy_tm_dt" class="req" inputtype="date" format="yyyy-mm-dd" style="left:4px; top:24px; width:100px; height:18px; "/>
			<caption id="caption14" style="left:106px; top:26px; width:25px; height:15px; text-align:center; ">~</caption>
			<input id="input5" ref="/root/reqData/reqForm/avg_tm_dt2" class="req" inputtype="date" format="yyyy-mm-dd" style="left:130px; top:24px; width:100px; height:18px; "/>
			<caption id="caption15" style="left:234px; top:25px; width:25px; height:15px; text-align:center; ">/</caption>
			<input id="input6" ref="/root/reqData/reqForm/year" style="left:259px; top:24px; width:31px; height:18px; text-align:center; "/>
			<caption id="caption17" style="left:291px; top:25px; width:25px; height:15px; text-align:center; ">년</caption>
			<input id="input7" ref="/root/reqData/reqForm/day" style="left:314px; top:24px; width:36px; height:18px; text-align:center; "/>
			<caption id="caption18" style="left:350px; top:25px; width:85px; height:15px; text-align:center; ">일 / 근속년수</caption>
			<input id="input8" ref="/root/reqData/reqForm/join_year" style="left:433px; top:24px; width:52px; height:18px; text-align:center; "/>
			<caption id="caption19" style="left:485px; top:25px; width:25px; height:15px; text-align:center; ">년</caption>
			<input id="output23" ref="/root/reqData/reqForm/join_year_2012" style="left:643px; top:24px; width:52px; height:18px; text-align:center; "/>
			<caption id="caption21" style="left:520px; top:25px; width:118px; height:15px; text-align:center; ">2012년 까지 근속년수</caption>
			<input id="output24" ref="/root/reqData/reqForm/join_year_2013" style="left:835px; top:24px; width:52px; height:18px; text-align:center; "/>
			<caption id="caption22" style="left:712px; top:26px; width:118px; height:15px; text-align:center; ">2013년 이후 근속년수</caption>
		</group>
		<group id="group5" class="gro_btn" style="left:10px; top:146px; width:926px; height:21px; ">
			<button id="button1" class="btn06" style="left:790px; top:0px; width:135px; height:21px; ">
				<caption>기본데이터가지고오기</caption>
				<script type="javascript" ev:event="onclick">
					<![CDATA[
					//if(model1.getValue("/root/reqData/join_tm") == "1"){
					//	alert("이미 기본데이터를 가지고 왔습니다.");
					//	return;
					//}
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt") == "" || model1.getValue("/root/reqData/reqForm/avg_tm_dt1") == ""){
						alert("퇴직(중간정산)예정일, 평균임금계산기준일을 입력해주세요.");
						return;
					}
					if(model1.getValue("/root/reqData/reqForm/emp_no") == ""){
						alert("사번을 입력해주세요.");
						return;
					}
					if (window.alert("기본데이터가지고오기를 실행 하시겠습니까?", "확인", 1) != 1) {
						return;
					};
					model1.setValue("/root/reqData/join_tm", "1");
					// 정산구분에 따른 로직
					//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "1"){ // 퇴직정산 120213
					/*
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010")){ // 퇴직정산
						// 그냥 흘러감
					//}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "2"){ // 중간정산 120213
					}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_020")
					           || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_060") ){ // 중간정산  //2016.03.16 퇴직 DC형 추가 
						// 중간정산일이 없을때 입사일 + 1 , 중간정산일이 있을때 중간정산일 + 1
						if(model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt") != ""){ // 중간정산일이 있을때
							model1.setValue("/root/reqData/searchData/cmpy_dt", model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt")); // 중간정산일을 조회조건으로
							model1.send("hd_lvcmpy_1002");
							model1.setValue("/root/reqData/reqForm/in_cmpy_tm_dt", model1.getValue("/root/dataSet/CURLIST/record/ov_cmpy_dt"));
							model1.removenode("/root/dataSet");
							input4.refresh();
						}/*else if(model1.getValue("/root/reqData/reqForm/last_midl_adjm_dt") == ""){ // 중간정산일이 없을때
							model1.setValue("/root/reqData/searchData/cmpy_dt", model1.getValue("/root/reqData/reqForm/in_cmpy_dt")); // 입사일을 조회조건으로
							model1.send("hd_lvcmpy_1002");
							model1.setValue("/root/reqData/reqForm/in_cmpy_tm_dt", model1.getValue("/root/dataSet/CURLIST/record/ov_cmpy_dt"));
							model1.removenode("/root/dataSet");
							input4.refresh();
						}
						 // 2016.07.05 수정   중강정산일이 없을 경우 입사일로 부터 계산하면 되므로 프로시저를 탈 필요가 없음 
					}
					*/
					
					var input1 = model1.getValue("/root/reqData/reqForm/in_cmpy_tm_dt"); // 입사일 (중간정산일)
					var input2 = model1.getValue("/root/reqData/reqForm/avg_tm_dt2"); // 평균임금계산기준일
					
					// 퇴직금 산정기간
					model1.setValue("/root/reqData/searchData1/in_cmpy_dt", input1);
					model1.setValue("/root/reqData/searchData1/lvcmpy_dt", input2);
					model1.send("hd_lvcmpy_1018");
					model1.setValue("/root/reqData/reqForm/year", model1.getValue("/root/dataSet/CURLIST/record/cont_yy"));
					model1.setValue("/root/reqData/reqForm/day", model1.getValue("/root/dataSet/CURLIST/record/cont_dd"));
					model1.setValue("/root/reqData/reqForm/join_year", model1.getValue("/root/dataSet/CURLIST/record/cont_yy_cal"));
					model1.setValue("/root/reqData/reqForm/join_year_2012", model1.getValue("/root/dataSet/CURLIST/record/cont_yy_cal_2012"));
					model1.setValue("/root/reqData/reqForm/join_year_2013", model1.getValue("/root/dataSet/CURLIST/record/cont_yy_cal_2013"));

					model1.removenode("/root/dataSet");
					model1.refresh();
					
					

					model1.removenode("/root/dataSet");
					model1.send("hd_lvcmpy_1104");
					//return;
					model1.setValue("/root/resData/cnt2", model1.getValue("/root/dataSet/CURLIST3/record/cnt")); // 퇴직월 급여가 없을 경우 0
					model1.setValue("/root/resData/cnt", model1.getValue("/root/dataSet/CURLIST2/record/cnt")); // 4개월 급여가 없을 경우 0
					model1.copyNode("/root/resData/gridData1", "/root/dataSet/CURLIST");
					model1.copyNode("/root/resData/gridData2", "/root/dataSet/CURLIST2");
					model1.removenode("/root/dataSet");
					
					model1.refresh(); 
					// 연차수당
					
					model1.setValue("/root/reqData/searchData/lvcmpy_dt", model1.getValue("/root/reqData/reqForm/avg_tm_dt1"));
					/*
					model1.send("hd_lvcmpy_1006");
					model1.setValue("/root/reqData/reqForm/saly_pay_dt", model1.getValue("/root/dataSet/CURLIST/record/saly_pay_dt")); // 지급년월
					model1.setValue("/root/reqData/reqForm/yymm_alon", model1.getValue("/root/dataSet/CURLIST/record/yymm_alon")); // 지급금액
					if(model1.getValue("/root/reqData/reqForm/yymm_alon") == ""){
						model1.setValue("/root/reqData/reqForm/yymm_alon", "0");
					}
					model1.removenode("/root/dataSet");
					*/
					
					// 월평균임금
//					alert(sum_total_saly);
//					alert(sum_total_alon);
//					alert(model1.getValue("/root/reqData/reqForm/yymm_alon"));
//					alert(model1.getValue("/root/resData/gridData2/record/saly_total_cnt"));	
					var sum_total_saly1= model1.getValue("/root/resData/gridData2/record/sum_total_saly1");
					var sum_total_yymm1 = model1.getValue("/root/resData/gridData2/record/sum_total_yymm1");
					var sum_total_hody1 = model1.getValue("/root/resData/gridData2/record/sum_total_hody1");
					
					if(model1.getValue("/root/resData/gridData2/record/saly_total_cnt") == "0"){
						var avg_saly =0;
						//alert("@@@");
					}else{
					var avg_saly =  [(Number(sum_total_saly1) + Number(sum_total_yymm1) + Number(sum_total_hody1))  / 12] ;  
						//92
						Number(model1.getValue("/root/resData/gridData2/record/saly_total_cnt")) * 30;
					}
					//alert("avg_saly.toFixed(0) : "+avg_saly.toFixed(0));
					//model1.setValue("/root/reqData/reqForm/avg_saly", avg_saly.toFixed(0));
					
				//	avg_saly = avg_saly.toFixed(0);   // 2014.04.21 추가  : 정수값을 가지고 퇴직금을 구해야 하기 때문에 추가함 (인사팀 김종혁 과장 요청) 
					// 퇴직금
					var lvcmpy_saly = avg_saly ;// * model1.getValue("/root/reqData/reqForm/join_year");
					//model1.setValue("/root/reqData/reqForm/lvcmpy_saly", lvcmpy_saly.toFixed(0));
					model1.setValue("/root/reqData/reqForm/lvcmpy_saly", (Math.round(lvcmpy_saly /100))*100); // 백원까지 반올림					
					var chk_cmpy_cd = getProperty("ss_cmpycd"); //미디어렙인 경우 1년 미만자(특수케이스)도 퇴직금 계산 가능하도록 처리_20141202_최호정
					/* 임시로 막기 
					if(chk_cmpy_cd != "550"){
						if(model1.getValue("/root/reqData/reqForm/join_year") < 1){
						model1.setValue("/root/reqData/reqForm/lvcmpy_saly", "0");
						}
					}
					*/
					
					// 퇴직월봉
					if(model1.getValue("/root/resData/cnt") == "0" && model1.getValue("/root/resData/cnt2") == "0"){	// 급여내역이 없을 때
						var lvcmpy_mm = model1.getValue("/root/resData/gridData1/record[1]/pay_saly");
						//model1.setValue("/root/reqData/reqForm/lvcmpy_mm", lvcmpy_mm);
						model1.setValue("/root/reqData/reqForm/lvcmpy_mm", (Math.round(lvcmpy_mm /100))*100); // 백원까지 반올림
					}else if(model1.getValue("/root/resData/cnt") == "1" && model1.getValue("/root/resData/cnt2") == "0"){
						model1.setValue("/root/reqData/reqForm/lvcmpy_mm", "0");
					}else if(model1.getValue("/root/resData/cnt") == "1" && model1.getValue("/root/resData/cnt2") == "1"){ // 급여내역이 있을 때
						if(commLastDay(model1.getValue("/root/resData/gridData1/record[1]/saly_to_dt").substring(0,6)) == model1.getValue("/root/resData/gridData1/record[1]/saly_to_dt").substring(6,8)){
							model1.setValue("/root/reqData/reqForm/lvcmpy_mm", "0");
						}else if(commLastDay(model1.getValue("/root/resData/gridData1/record[1]/saly_to_dt").substring(0,6)) != model1.getValue("/root/resData/gridData1/record[1]/saly_to_dt").substring(6,8)){
							//var lvcmpy_mm = (model1.getValue("/root/resData/gridData1/record[1]/pay_saly") / 30 * Number(day_temp1 + 1)) - model1.getValue("/root/resData/gridData1/record[1]/pay_saly");
							var lvcmpy_mm = (model1.getValue("/root/resData/gridData1/record[2]/pay_saly") / 30 * Number(day_temp1 + 1)) - model1.getValue("/root/resData/gridData1/record[2]/pay_saly");
							model1.setValue("/root/reqData/reqForm/lvcmpy_mm", (Math.round(lvcmpy_mm /100))*100); // 백원까지 반올림
						}
					}
					
					
					if (model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "6" )
					{
						vaca_saly_fn();//연차수당 가꼬오는부분
					}
					
					
					model1.setValue("/root/reqData/reqForm/vaca_saly", "0");
					model1.setValue("/root/reqData/reqForm/lvcmpy_add_saly", "0");
					model1.setValue("/root/reqData/reqForm/sp_lvcmpy_add_saly", "0");
					
					for(var i=datagrid1.fixedRows; i<datagrid1.rows; i++){
						datagrid1.rowStatus(i) = 2;  // 강제로 모든 행을 저장값으로 변경함
					}	
					/*
					model1.setValue("/root/reqData/reqForm/mm_saly_1", model1.getValue("/root/resData/gridData1/record[1]/pay_saly")); // 최종 월봉 1
					model1.setValue("/root/reqData/reqForm/mm_saly_2", model1.getValue("/root/resData/gridData1/record[2]/pay_saly")); // 최종 월봉 2
					model1.setValue("/root/reqData/reqForm/mm_saly_3", model1.getValue("/root/resData/gridData1/record[3]/pay_saly")); // 최종 월봉 3
					model1.setValue("/root/reqData/reqForm/mm_saly_4", model1.getValue("/root/resData/gridData1/record[4]/pay_saly")); // 최종 월봉 4
					model1.setValue("/root/reqData/reqForm/sum_mm_saly", model1.getValue("/root/resData/gridData2/record[1]/sum_total_saly1")); // 최종월봉합
					model1.setValue("/root/reqData/reqForm/mm_alon_1", model1.getValue("/root/resData/gridData1/record[1]/yymm_alon")); // 최종 유급 1
					model1.setValue("/root/reqData/reqForm/mm_alon_2", model1.getValue("/root/resData/gridData1/record[2]/yymm_alon")); // 최종 유급 2
					model1.setValue("/root/reqData/reqForm/mm_alon_3", model1.getValue("/root/resData/gridData1/record[3]/yymm_alon")); // 최종 유급 3
					model1.setValue("/root/reqData/reqForm/mm_alon_4", model1.getValue("/root/resData/gridData1/record[4]/yymm_alon")); // 최종 유급 4
					model1.setValue("/root/reqData/reqForm/sum_mm_alon", model1.getValue("/root/resData/gridData2/record[1]/sum_total_alon1")); // 최종휴급수당합
					*/
					//if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "2"){ // 정산구분 120213
					if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_020")
					 || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_060")
					 || model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_070") ){ // 정산구분  //2016.03.16 퇴직 DC형 추가 
						output9.disabled = true;
						output11.disabled = true;
						output16.disabled = true;
						output17.disabled = true;
						output18.disabled = true;
						output19.disabled = true;
						output20.disabled = true;
						output21.disabled = true;
						output22.disabled = true;
						
						output9.value = "";
						output11.value = "";
						output16.value = "";
						output17.value = "";
						output18.value = "";
						output19.value = "";
						output20.value = "";
						output21.value = "";
						output22.value = "";
						output10.value = "";
						output12.value = "";
						output13.value = "";
						output14.value = "";
						output15.value = "";
					//}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == "1"){ 120213
					}else if(model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010")
					            ||model1.getValue("/root/reqData/reqForm/lvcmpy_clsf") == model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_080")){
						output9.disabled = false;
						output11.disabled = false;
						output16.disabled = false;
						output17.disabled = false;
						output18.disabled = false;
						output19.disabled = false;
						output20.disabled = false;
						output21.disabled = false;
						output22.disabled = false;
					}
					button3.disabled = false;
					button9.disabled = false;
					
					model1.refresh();
					]]>
				</script>
			</button>
		</group>
		<group id="group8" style="left:10px; top:405px; width:926px; height:56px; ">
			<caption id="caption33" class="tit02" style="left:0px; top:5px; width:205px; height:20px; font-weight:bold; ">퇴직금</caption>
			<caption id="caption35" class="list_cap02" style="left:0px; top:26px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption37" class="list_cap01" style="left:0px; top:26px; width:90px; height:26px; text-align:center; ">퇴직금</caption>
			<caption id="caption38" style="left:191px; top:31px; width:25px; height:15px; text-align:center; ">원</caption>
			<input id="output8" ref="/root/reqData/reqForm/lvcmpy_saly" format="#,###" appearance="input" style="left:94px; top:30px; width:100px; height:18px; text-align:right; "/>
			<button id="button4" class="btn02" style="left:874px; top:4px; width:52px; height:21px; ">
				<caption>재계산</caption>
				<script type="javascript" ev:event="onclick">
					<![CDATA[
					// 월봉 총합 구하기
					//var sum_total_saly1 = model1.getValue("/root/resData/gridData1/record[1]/pay_saly");
					//var sum_total_saly2 = model1.getValue("/root/resData/gridData1/record[2]/pay_saly");
					//var sum_total_saly3 = model1.getValue("/root/resData/gridData1/record[3]/pay_saly");
					//var sum_total_saly4 = model1.getValue("/root/resData/gridData1/record[4]/pay_saly");
					//var sum_total_saly = Number(sum_total_saly1) + Number(sum_total_saly2) + Number(sum_total_saly3) + Number(sum_total_saly4);
					//var sum_total_saly = model.getValue("/root/resData/gridData2/record/sum_total_saly1");
					
					// 유급휴일근무수당 총합 구하기
					//var sum_total_alon1 = model1.getValue("/root/resData/gridData1/record[1]/yymm_alon");
					//var sum_total_alon2 = model1.getValue("/root/resData/gridData1/record[2]/yymm_alon");
					//var sum_total_alon3 = model1.getValue("/root/resData/gridData1/record[3]/yymm_alon");
					//var sum_total_alon4 = model1.getValue("/root/resData/gridData1/record[4]/yymm_alon");
					//var sum_total_alon = model.getValue("/root/resData/gridData2/record/sum_total_alon1");;
					
					var sum_total_saly1= model1.getValue("/root/resData/gridData2/record[1]/sum_total_saly1");
					var sum_total_yymm1 = model1.getValue("/root/resData/gridData2/record[1]/sum_total_yymm1");
					var sum_total_hody1 = model1.getValue("/root/resData/gridData2/record[1]/sum_total_hody1");

					//근무일수 가꼬오기..
					var saly_total_cnt = model1.getValue("/root/resData/gridData2/record/saly_total_cnt");
					
					// 월평균임금
					var avg_saly = 0;
					 avg_saly =  [(Number(sum_total_saly1) + Number(sum_total_hody1) + Number(sum_total_yymm1)) / 12] ;

				   // model1.setValue("/root/reqData/reqForm/avg_saly", avg_saly.toFixed(0));

				//	avg_saly = avg_saly.toFixed(0);   // 2014.04.21 추가  : 정수값을 가지고 퇴직금을 구해야 하기 때문에 추가함 (인사팀 김종혁 과장 요청) 
					
					// 퇴직금
					var lvcmpy_saly = avg_saly ;// * model1.getValue("/root/reqData/reqForm/join_year");
					//model1.setValue("/root/reqData/reqForm/lvcmpy_saly", lvcmpy_saly.toFixed(0));
					model1.setValue("/root/reqData/reqForm/lvcmpy_saly", (Math.round(lvcmpy_saly /100))*100); // 백원까지 반올림					
					
					/*
					var chk_cmpy_cd = getProperty("ss_cmpycd"); //미디어렙인 경우 1년 미만자(특수케이스)도 퇴직금 계산 가능하도록 처리_20141202_최호정
					if(chk_cmpy_cd != "550"){
						if(model1.getValue("/root/reqData/reqForm/join_year") < 1){
							model1.setValue("/root/reqData/reqForm/lvcmpy_saly", "0");
						}
					}*/
					model1.refresh();
					]]>
				</script>
			</button>
		</group>
		<group id="group9" style="left:10px; top:465px; width:926px; height:46px; ">
			<caption id="caption39" class="list_cap02" style="left:0px; top:20px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption40" class="tit02" style="left:0px; top:0px; width:205px; height:20px; font-weight:bold; ">퇴직월봉</caption>
			<caption id="caption41" class="list_cap01" style="left:0px; top:20px; width:90px; height:26px; text-align:center; ">퇴직월봉</caption>
			<input id="output9" ref="/root/reqData/reqForm/lvcmpy_mm" format="(-)#,###" style="left:94px; top:24px; width:100px; height:18px; text-align:right; "/>
			<caption id="caption43" style="left:191px; top:25px; width:25px; height:15px; text-align:center; ">원</caption>
		</group>
		<group id="group10" style="left:10px; top:510px; width:926px; height:72px; ">
			<caption id="caption42" class="list_cap02" style="left:0px; top:20px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption44" class="tit02" style="left:0px; top:0px; width:415px; height:20px; font-weight:bold; "/>
			<caption id="caption45" class="list_cap01" style="left:0px; top:20px; width:90px; height:26px; text-align:center; ">연차수당1</caption>
			<input id="output10" ref="/root/reqData/reqForm/ym_avg_saly" format="#,###" style="left:94px; top:24px; width:100px; height:18px; text-align:right; "/>
			<caption id="caption46" style="left:191px; top:25px; width:25px; height:15px; text-align:center; ">원</caption>
			<caption id="caption47" class="list_cap02" style="left:0px; top:45px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption48" class="list_cap01" style="left:0px; top:45px; width:90px; height:26px; text-align:center; ">연차수당2</caption>
			<caption id="caption49" style="left:191px; top:50px; width:25px; height:15px; text-align:center; ">원</caption>
			<input id="output11" ref="/root/reqData/reqForm/ym_avg_saly2" format="#,###" style="left:94px; top:49px; width:100px; height:18px; text-align:right; "/>
			<input id="output12" ref="/root/reqData/reqForm/year_vaca_dds" style="left:287px; top:24px; width:83px; height:18px; text-align:right; "/>
			<caption id="caption50" class="list_cap01" style="left:213px; top:20px; width:72px; height:26px; text-align:center; ">연차수1</caption>
			<caption id="caption51" style="left:367px; top:25px; width:25px; height:15px; text-align:center; ">개</caption>
			<caption id="caption52" class="list_cap01" style="left:390px; top:20px; width:72px; height:26px; text-align:center; ">가산수1</caption>
			<caption id="caption53" style="left:542px; top:25px; width:25px; height:15px; text-align:center; ">개</caption>
			<input id="output13" ref="/root/reqData/reqForm/add_vaca_dds" style="left:464px; top:24px; width:83px; height:18px; text-align:right; "/>
			<caption id="caption54" class="list_cap01" style="left:564px; top:20px; width:72px; height:26px; text-align:center; ">사용(의무)1</caption>
			<output id="output14" ref="/root/reqData/reqForm/tm_vaca_dds" style="left:639px; top:24px; width:83px; height:18px; text-align:right; "/>
			<caption id="caption55" style="left:719px; top:25px; width:25px; height:15px; text-align:center; ">개</caption>
			<caption id="caption56" class="list_cap01" style="left:746px; top:20px; width:72px; height:26px; text-align:center; ">합계1</caption>
			<input id="output15" ref="/root/reqData/reqForm/total_vaca_dds" style="left:821px; top:24px; width:83px; height:18px; text-align:right; "/>
			<caption id="caption57" style="left:901px; top:25px; width:25px; height:15px; text-align:center; ">개</caption>
			<caption id="caption58" class="list_cap01" style="left:213px; top:45px; width:72px; height:26px; text-align:center; ">연차수2</caption>
			<caption id="caption59" style="left:367px; top:50px; width:25px; height:15px; text-align:center; ">개</caption>
			<caption id="caption60" class="list_cap01" style="left:390px; top:45px; width:72px; height:26px; text-align:center; ">가산수2</caption>
			<input id="output16" ref="/root/reqData/reqForm/year_vaca_dds2" style="left:287px; top:49px; width:83px; height:18px; text-align:right; "/>
			<caption id="caption61" style="left:542px; top:50px; width:25px; height:15px; text-align:center; ">개</caption>
			<input id="output17" ref="/root/reqData/reqForm/add_vaca_dds2" style="left:464px; top:49px; width:83px; height:18px; text-align:right; "/>
			<input id="output18" ref="/root/reqData/reqForm/tm_vaca_dds2" style="left:639px; top:49px; width:41px; height:18px; text-align:right; "/>
			<caption id="caption62" class="list_cap01" style="left:564px; top:45px; width:72px; height:26px; text-align:center; ">사용(의무)2</caption>
			<input id="output19" ref="/root/reqData/reqForm/total_vaca_dds2" style="left:821px; top:49px; width:83px; height:18px; text-align:right; "/>
			<caption id="caption63" style="left:719px; top:50px; width:25px; height:15px; text-align:center; ">개</caption>
			<caption id="caption64" class="list_cap01" style="left:746px; top:45px; width:72px; height:26px; text-align:center; ">합계2</caption>
			<caption id="caption65" style="left:901px; top:50px; width:25px; height:15px; text-align:center; ">개</caption>
			<output id="input9" ref="/root/reqData/reqForm/duty_vaca_dds2" format="99" appearance="output" style="left:680px; top:49px; width:40px; height:18px; text-align:right; "/>
		</group>
		<group id="group11" style="left:10px; top:581px; width:926px; height:49px; ">
			<caption id="caption66" class="list_cap02" style="left:0px; top:22px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption67" class="tit02" style="left:0px; top:0px; width:205px; height:20px; font-weight:bold; ">미지급 유급휴일수당</caption>
			<caption id="caption68" class="list_cap01" style="left:0px; top:22px; width:90px; height:26px; text-align:center; ">유급휴일수당</caption>
			<input id="output20" ref="/root/reqData/reqForm/vaca_saly" format="#,###" style="left:94px; top:26px; width:100px; height:18px; text-align:right; "/>
			<caption id="caption69" style="left:191px; top:27px; width:25px; height:15px; text-align:center; ">원</caption>
			<button id="button11" class="btn05" style="left:814px; top:1px; width:112px; height:21px; ">
				<caption>유급휴일수당조회</caption>
				<script type="javascript" ev:event="onclick">
					<![CDATA[
						model.removeNodeset("/root/reqData/fwdData");  
						model.makeNode("/root/reqData/fwdData/func_nm");
						model.setValue("/root/reqData/fwdData/func_nm", "setLvcmpy");
						model.makeNode("/root/reqData/fwdData/emp_no");
						model.setValue("/root/reqData/fwdData/emp_no", model1.getValue("/root/reqData/reqForm/emp_no"));
						model.makeNode("/root/reqData/fwdData/nm_korn");
						model.setValue("/root/reqData/fwdData/nm_korn", model1.getValue("/root/reqData/reqForm/nm_korn"));
						window.load("/xrw/hd/lvcmpy/HD_LVCMPY_1200.xrw","mdichild", "hd_lvcmpy_1200", "align:center; caption:hidden;", "/root/reqData/fwdData", "/root/reqData/fwdData");
					]]>
				</script>
			</button>
		</group>
		<group id="group12" style="left:10px; top:631px; width:926px; height:46px; ">
			<caption id="caption70" class="list_cap02" style="left:0px; top:20px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption71" class="tit02" style="left:0px; top:0px; width:205px; height:20px; font-weight:bold; ">퇴직가산금</caption>
			<caption id="caption72" class="list_cap01" style="left:0px; top:20px; width:90px; height:26px; text-align:center; ">퇴직가산금</caption>
			<input id="output21" ref="/root/reqData/reqForm/lvcmpy_add_saly" format="#,###" style="left:94px; top:24px; width:100px; height:18px; text-align:right; "/>
			<caption id="caption73" style="left:191px; top:25px; width:25px; height:15px; text-align:center; ">원</caption>
		</group>
		<group id="group13" style="left:10px; top:678px; width:926px; height:46px; ">
			<caption id="caption74" class="list_cap02" style="left:0px; top:20px; width:926px; height:26px; text-align:center; "/>
			<caption id="caption75" class="tit02" style="left:0px; top:0px; width:205px; height:20px; font-weight:bold; ">명예퇴직가산금</caption>
			<caption id="caption76" class="list_cap01" style="left:0px; top:20px; width:90px; height:26px; text-align:center; ">명예퇴직가산금</caption>
			<input id="output22" ref="/root/reqData/reqForm/sp_lvcmpy_add_saly" format="#,###" style="left:94px; top:24px; width:100px; height:18px; text-align:right; "/>
			<caption id="caption77" style="left:191px; top:25px; width:25px; height:15px; text-align:center; ">원</caption>
		</group>
		<group id="group6" style="left:10px; top:356px; width:926px; height:47px; ">
			<datagrid id="datagrid2" nodeset="/root/resData/gridData2/record" caption="종료일^월봉^유급휴일근무수당^연차수당^caption1^caption3^caption2" colsep="#" colwidth="315, 100, 100, 100, 100, 100, 100, 100" mergecellsfixedrows="bycolrec" rowsep="|" style="left:0px; top:2px; width:924px; height:42px; ">
				<col class="req" ref="aa"/>
				<col class="req" ref="sum_total_saly1" format="#,###" style="left:420px; top:20px; height:5px; font-weight:bold; text-align:right; "/>
				<col class="req" ref="sum_total_hody1" format="#,###" style="font-weight:bold; text-align:right; "/>
				<col class="req" ref="sum_total_yymm1" format="#,###" style="font-weight:bold; text-align:right; "/>
				<col class="req" ref="sum_total_saly2" format="#,###" style="left:420px; top:20px; height:5px; font-weight:bold; text-align:right; "/>
				<col class="req" ref="sum_total_hody2" format="#,###" style="font-weight:bold; text-align:right; "/>
				<col class="req" ref="sum_total_yymm2" format="#,###" style="font-weight:bold; text-align:right; "/>
				<col class="req" ref="occr_dt" visibility="hidden"/>
			</datagrid>
			<caption id="caption20" style="left:128px; top:25px; width:65px; height:15px; font-weight:bold; text-align:center; ">합계</caption>
			<col class="req" ref="sum_total_saly2" format="#,###" style="font-weight:bold; text-align:right; "/>
		</group>
		<group id="group2" style="left:10px; top:197px; width:926px; height:181px; ">
			<caption id="caption9" class="tit02" style="left:0px; top:5px; width:255px; height:20px; font-weight:bold; ">월봉/유급휴일수당/연차수당 내역</caption>
			<datagrid id="datagrid1" nodeset="/root/resData/gridData1/record" caption="지급월^시작일^종료일^일수^월봉^유급휴일근무수당^연차수당^월봉^유급휴일근무수당^연차수당" colsep="#" colwidth="95, 100, 100, 64, 100, 100, 100, 100, 100, 100, 100, 100" extendlastcol="scroll" mergecellsfixedrows="bycolrec" rowheader="update" rowsep="|" selectionmode="free" style="left:0px; top:25px; width:924px; height:156px; ">
				<col class="req" ref="saly_pay_mm" format="yyyy-mm"/>
				<col class="req" ref="saly_fr_dt" format="yyyy-mm-dd"/>
				<col class="req" ref="saly_to_dt" format="yyyy-mm-dd"/>
				<col class="req" ref="saly_cnt" visibility="hidden"/>
				<col class="req" ref="pay_saly1" format="#,###" style="text-align:right; "/>
				<col class="req" ref="hody_alon1" format="#,###" style="text-align:right; "/>
				<col class="req" ref="yymm_alon1" format="#,###" style="text-align:right; "/>
				<col class="req" ref="pay_saly2" type="input" format="#,###" style="text-align:right; "/>
				<col class="req" ref="hody_alon2" type="input" format="#,###" style="text-align:right; "/>
				<col class="req" ref="yymm_alon2" type="input" format="#,###" style="text-align:right; "/>
				<col class="req" ref="emp_no" visibility="hidden"/>
				<col class="req" ref="cmpy_cd" visibility="hidden"/>
				<script type="javascript" ev:event="xforms-value-changed">
					<![CDATA[
					var cell = datagrid1.selectedCells;
					var col = cell.item(0).col;
					var row = cell.item(0).row;
					
					var selectValue = datagrid1.valueMatrix(row, col);
					if (selectValue.indexOf(' ') > -1){
						codeVal = selectValue.substring(0, selectValue.indexOf(' '));
					} else {
						codeVal = selectValue;
					}
					
					if (codeVal != ''){
						/*
						if (col == 7){
							// 월봉 총합 구하기
							var sum_total_saly1 = model1.getValue("/root/resData/gridData1/record[1]/sum_saly2");
							var sum_total_saly2 = model1.getValue("/root/resData/gridData1/record[2]/sum_saly2");
							var sum_total_saly3 = model1.getValue("/root/resData/gridData1/record[3]/sum_saly2");
							var sum_total_saly4 = model1.getValue("/root/resData/gridData1/record[4]/sum_saly2");
							var sum_total_saly = Number(sum_total_saly1) + Number(sum_total_saly2) + Number(sum_total_saly3) + Number(sum_total_saly4);
							model1.setValue("/root/resData/gridData2/record[1]/sum_total_saly2", sum_total_saly);
							datagrid2.refresh();
						}
						if (col == 8){
							// 유급휴일근무수당 총합 구하기
							var sum_total_alon1 = model1.getValue("/root/resData/gridData1/record[1]/sum_alon2");
							var sum_total_alon2 = model1.getValue("/root/resData/gridData1/record[2]/sum_alon2");
							var sum_total_alon3 = model1.getValue("/root/resData/gridData1/record[3]/sum_alon2");
							var sum_total_alon4 = model1.getValue("/root/resData/gridData1/record[4]/sum_alon2");
							var sum_total_alon = Number(sum_total_alon1) + Number(sum_total_alon2) + Number(sum_total_alon3) + Number(sum_total_alon4);
							model1.setValue("/root/resData/gridData2/record[1]/sum_total_alon2", sum_total_alon);
							datagrid2.refresh();
						}
						*/
					}
					]]>
				</script>
			</datagrid>
			<button id="button6" class="btn05" style="left:760px; top:2px; width:112px; height:21px; ">
				<caption>유급휴일수당조회</caption>
				<script type="javascript" ev:event="onclick">
					<![CDATA[
						model.removeNodeset("/root/reqData/fwdData");  
						model.makeNode("/root/reqData/fwdData/func_nm");
						model.setValue("/root/reqData/fwdData/func_nm", "setLvcmpy");
						model.makeNode("/root/reqData/fwdData/emp_no");
						model.setValue("/root/reqData/fwdData/emp_no", model1.getValue("/root/reqData/reqForm/emp_no"));
						model.makeNode("/root/reqData/fwdData/nm_korn");
						model.setValue("/root/reqData/fwdData/nm_korn", model1.getValue("/root/reqData/reqForm/nm_korn"));
						window.load("/xrw/hd/lvcmpy/HD_LVCMPY_1200.xrw","modal", "hd_lvcmpy_1200", "align:center; caption:hidden;", "/root/reqData/fwdData", "/root/reqData/fwdData");
					]]>
				</script>
			</button>
			<button id="button5" class="btn02" style="left:874px; top:2px; width:52px; height:21px; ">
				<caption>적용</caption>
				<script type="javascript" ev:event="onclick">
					<![CDATA[
					// 월봉, 월봉 합계 유급휴일근무수당 , 유급휴일근무수당 합계
					//alert("십원단위는 반올림 됩니다.");
					var sum_pay_saly = 0; 
					var sum_total_hody = 0; 
					var sum_total_yymm = 0; 
					
					for(var i=datagrid1.fixedRows; i<datagrid1.rows; i++){
						if(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/saly_cnt") ==   commLastDay(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/saly_fr_dt")))
						{
							model1.setValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly1", (Math.round(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly2")/100))*100);
							model1.setValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon1", (Math.round(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon2")/100))*100);
							model1.setValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon1", (Math.round(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon2")/100))*100);
						}
						else 
						{
							model1.setValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly1", (Math.round( (model1.getValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly2")/30 ) * model1.getValue("/root/resData/gridData1/record[" + (i) + "]/saly_cnt")   /100))*100);
							model1.setValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon1", (Math.round((model1.getValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon2")/30 ) * model1.getValue("/root/resData/gridData1/record[" + (i) + "]/saly_cnt")   /100))*100);
							model1.setValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon1", (Math.round((model1.getValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon2")/30 ) * model1.getValue("/root/resData/gridData1/record[" + (i) + "]/saly_cnt")   /100))*100);
						
						}
						sum_pay_saly = sum_pay_saly + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly1") );
						sum_total_hody = sum_total_hody + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon1") );
						sum_total_yymm = sum_total_yymm + Number(model1.getValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon1") );
						 
						datagrid1.rowStatus(i) = 2;  // 강제로 모든 행을 저장값으로 변경함
					}	
				    
					model1.setValue("/root/resData/gridData2/record[1]/sum_total_saly1", sum_pay_saly);
					model1.setValue("/root/resData/gridData2/record[1]/sum_total_hody1", sum_total_hody);
					model1.setValue("/root/resData/gridData2/record[1]/sum_total_yymm1", sum_total_yymm );
					
					
					if(model1.getValue("/root/resData/gridData2/record/saly_total_cnt") == "0"){
						var avg_saly =0;
						//alert("@@@");
					}else{
					var avg_saly =  [(Number(sum_pay_saly) + Number(sum_total_hody) + Number(sum_total_yymm))  / 12] ;  
						//92
						Number(model1.getValue("/root/resData/gridData2/record/saly_total_cnt")) * 30;
					}
					//model1.setValue("/root/reqData/reqForm/avg_saly", avg_saly.toFixed(0));
					
				//	avg_saly = avg_saly.toFixed(0);   // 2014.04.21 추가  : 정수값을 가지고 퇴직금을 구해야 하기 때문에 추가함 (인사팀 김종혁 과장 요청) 
					// 퇴직금
					var lvcmpy_saly = avg_saly ;// * model1.getValue("/root/reqData/reqForm/join_year");
					//model1.setValue("/root/reqData/reqForm/lvcmpy_saly", lvcmpy_saly.toFixed(0));
					model1.setValue("/root/reqData/reqForm/lvcmpy_saly", (Math.round(lvcmpy_saly /100))*100); // 백원까지 반올림	
					
					model1.setValue("/root/reqData/reqForm/sum_mm_saly", sum_pay_saly); // 최종월봉합
					
					
					model1.setValue("/root/reqData/reqForm/sum_total_hody", sum_total_hody); // 최종휴급수당합
					
					model1.refresh();
					]]>
				</script>
			</button>
		</group>
		<button id="button12" class="btn02" style="left:666px; top:38px; width:52px; height:21px; ">
			<caption>초기화</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					//combo1.value = "1"; 120213
					combo1.value = model1.getValue("/root/initData/comboSet/xx_lvcmpy_clsf_010");
					button11.disabled = true;
					button6.disabled = true;
					button3.disabled = true;
					button9.disabled = true;
					//button1.disabled = true;
					//button3.disabled = true;
					model1.reset();
					datagrid1.clearStatus();	
					datagrid2.clearStatus();	
					]]>
			</script>
		</button>
		<button id="button2" class="btn02" style="left:720px; top:38px; width:52px; height:21px; ">
			<caption>조회</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					if(model1.getValue("/root/reqData/reqForm/emp_no") == "" || model1.getValue("/root/reqData/reqForm/nm_korn") == ""){
						alert("사원검색 후 조회 해주세요.");
						return;
					}else{
						model.removeNodeset("/root/reqData/fwdData");  
						model.makeNode("/root/reqData/fwdData/func_nm");
						model.setValue("/root/reqData/fwdData/func_nm", "setLvcmpy_dt");
						model.makeNode("/root/reqData/fwdData/emp_no");
						model.setValue("/root/reqData/fwdData/emp_no", model1.getValue("/root/reqData/reqForm/emp_no"));
						model.makeNode("/root/reqData/fwdData/nm_korn");
						model.setValue("/root/reqData/fwdData/nm_korn", model1.getValue("/root/reqData/reqForm/nm_korn"));
					 	window.load("/xrw/hd/lvcmpy/HD_LVCMPY_1010.xrw","modal", "", "caption:hidden;align:center;width:460px;height:240px;left:300px;top:200px", "/root/reqData/fwdData", "/root/reqData/fwdData");
					}
					]]>
			</script>
		</button>
		<button id="button13" class="btn02" style="left:884px; top:38px; width:52px; height:21px; ">
			<caption>종료</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
				 	viewer("mainFrame").window.javaScript.closeMDIWindow(model.getValue("/root/initData/pageInfo/pageID"));
					]]>
			</script>
		</button>
		<button id="button3" class="btn02" style="left:775px; top:38px; width:52px; height:21px; ">
			<caption>저장</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					vaca_saly_fn_rqv2();
					model1.send("hd_lvcmpy_1011");
					var cnt = model1.getValue("/root/dataSet/CURLIST/record/cnt");
					model1.removenode("/root/dataSet");
					if(cnt == 1){
						alert("이미 정산된 자료는 수정 할 수 없습니다.");
						return;
					}
					if (window.alert("저장 하시겠습니까?", "확인", 1) != 1) {
						return;
					};
			      
				    model1.setValue("/root/reqData/multiUpDate", datagrid1.getUpdateData());

					model1.send("hd_lvcmpy_1105");
					if(submit_completed()) {
						// 2014.04.21  수정 : 기존에는 저장 후 조회가 되지 않았지만 되도록 함 .. (이유 : 저장 후 다시 조회 해야지 수정이 안된 부분을 알수 있음으로 )
						var emp_no = model1.getValue("/root/reqData/searchData/emp_no");
						var nm_korn = model1.getValue("/root/reqData/searchData/nm_korn");
						var lvcmpy_dt = model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt");
						var lvcmpy_clsf = model1.getValue("/root/reqData/reqForm/lvcmpy_clsf");
						
				///		alert(emp_no + "  "+  nm_korn  + "  "+  lvcmpy_dt + "  " + lvcmpy_clsf);
						setLvcmpy_dt(emp_no, nm_korn, lvcmpy_dt, lvcmpy_clsf );
					}
					]]>
			</script>
		</button>
		<button id="button9" class="btn02" style="left:830px; top:38px; width:52px; height:21px; ">
			<caption>출력</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
						var emp_no    = "";
						var lvcmpy_dt = "";
						
						emp_no    = model1.getValue("/root/reqData/reqForm/emp_no");
						lvcmpy_dt = model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt");
						
						if(emp_no == "") {
							alert("사번은 필수 입력 항목입니다.");
							return;
						}
						
						if(lvcmpy_dt == "") {
							alert("퇴직(중간정산)예정일은 필수 입력 항목입니다.");
							return;
						}
						
						var saly_pay_mm_list  = "" ; 
						var pay_saly_list  = "" ; 
						var hody_alon_list  = "" ; 
						var yymm_alon_list  = "" ; 
						var row_cnt = 0; 
						
						for(var i=datagrid1.fixedRows; i<datagrid1.rows; i++){
							saly_pay_mm_list = saly_pay_mm_list + "#"+model1.getValue("/root/resData/gridData1/record[" + (i) + "]/saly_pay_mm");
						    pay_saly_list = pay_saly_list + "#"+ model1.getValue("/root/resData/gridData1/record[" + (i) + "]/pay_saly1");
						    hody_alon_list = hody_alon_list + "#"+ model1.getValue("/root/resData/gridData1/record[" + (i) + "]/hody_alon1");	
						    yymm_alon_list = yymm_alon_list + "#"+ model1.getValue("/root/resData/gridData1/record[" + (i) + "]/yymm_alon1");	
						}
						row_cnt = datagrid1.rows; 
						
						
						resetOznode();											//오즈node 초기화
						makeNodeValue("/root/oz_data/ozrName","hd/HD_LVCMPY_1108");	//odi 파일경로('/' root경로 제외)
						makeNodeValue("/root/oz_data/preview","preview"); 			//preview : 미리보기, print : 인쇄
						makeNodeValue("/root/oz_data/printsize",""); 				//페이지용지설정(기본 A4)
						
						//Parameter setting
						makeNodeValue("/root/oz_data/odiParam/iv_cmpy_cd" , getProperty("ss_cmpycd") );	//회사코드
						makeNodeValue("/root/oz_data/odiParam/iv_emp_no",model1.getValue("/root/reqData/reqForm/emp_no"));	// 사번
						makeNodeValue("/root/oz_data/odiParam/iv_in_cmpy_dt",model1.getValue("/root/reqData/reqForm/in_cmpy_dt"));	// 입사일
						makeNodeValue("/root/oz_data/odiParam/iv_nm_korn",model1.getValue("/root/reqData/reqForm/nm_korn"));	// 성명
						makeNodeValue("/root/oz_data/odiParam/iv_dept_nm",model1.getValue("/root/reqData/reqForm/dept_nm"));	// 부서
						makeNodeValue("/root/oz_data/odiParam/iv_lvcmpy_tm_dt",model1.getValue("/root/reqData/reqForm/lvcmpy_tm_dt"));	// 퇴직(예정)일
						makeNodeValue("/root/oz_data/odiParam/iv_in_cmpy_tm_dt",model1.getValue("/root/reqData/reqForm/in_cmpy_tm_dt"));	// 퇴직금 산정기간 시작
						makeNodeValue("/root/oz_data/odiParam/iv_avg_tm_dt2",model1.getValue("/root/reqData/reqForm/avg_tm_dt2"));	// 퇴직금 산정기간 종료
						makeNodeValue("/root/oz_data/odiParam/iv_year",model1.getValue("/root/reqData/reqForm/year"));	// 년
						makeNodeValue("/root/oz_data/odiParam/iv_day",model1.getValue("/root/reqData/reqForm/day"));		// 일
						makeNodeValue("/root/oz_data/odiParam/iv_join_year",model1.getValue("/root/reqData/reqForm/join_year"));		// 근속년수
						makeNodeValue("/root/oz_data/odiParam/iv_saly_pay_mm_list",saly_pay_mm_list);		// 지급월내역 
						makeNodeValue("/root/oz_data/odiParam/iv_pay_saly_list",pay_saly_list);		// 월봉내역 
						makeNodeValue("/root/oz_data/odiParam/iv_hody_alon_list",hody_alon_list);		// 유급휴일수당내역 
						makeNodeValue("/root/oz_data/odiParam/iv_yymm_alon_list",yymm_alon_list);		// 연차수당내역 
						makeNodeValue("/root/oz_data/odiParam/iv_row_cnt",row_cnt);		//row 갯수   
						makeNodeValue("/root/oz_data/odiParam/iv_lvcmpy_add_saly",model1.getValue("/root/reqData/reqForm/lvcmpy_add_saly"));		//퇴직금 가산금   
						
					
						makeNodeValue("/root/oz_data/odiParam/iv_saly_pay_dt",model1.getValue("/root/reqData/reqForm/saly_pay_dt"));
						makeNodeValue("/root/oz_data/odiParam/iv_yymm_alon",model1.getValue("/root/reqData/reqForm/yymm_alon"));
						makeNodeValue("/root/oz_data/odiParam/iv_avg_saly",model1.getValue("/root/reqData/reqForm/avg_saly"));
						makeNodeValue("/root/oz_data/odiParam/iv_lvcmpy_saly",model1.getValue("/root/reqData/reqForm/lvcmpy_saly"));
						makeNodeValue("/root/oz_data/odiParam/iv_lvcmpy_mm",model1.getValue("/root/reqData/reqForm/lvcmpy_mm"));
						makeNodeValue("/root/oz_data/odiParam/iv_year_vaca_dds",model1.getValue("/root/reqData/reqForm/year_vaca_dds"));
						makeNodeValue("/root/oz_data/odiParam/iv_add_vaca_dds",model1.getValue("/root/reqData/reqForm/add_vaca_dds"));
						
						//makeNodeValue("/root/oz_data/odiParam/iv_duty_vaca_dds",model1.getValue("/root/reqData/reqForm/total_vaca_dds"));
						makeNodeValue("/root/oz_data/odiParam/iv_duty_vaca_dds",model1.getValue("/root/reqData/reqForm/temp_vaca_dds"));
						
						makeNodeValue("/root/oz_data/odiParam/iv_ym_avg_saly",model1.getValue("/root/reqData/reqForm/ym_avg_saly"));
						makeNodeValue("/root/oz_data/odiParam/iv_vaca_saly",model1.getValue("/root/reqData/reqForm/vaca_saly"));
				//		alert("temp " + model1.getValue("/root/reqData/reqForm/temp_vaca_dds") ); 
				//		alert("vaca_saly " + model1.getValue("/root/reqData/reqForm/vaca_saly") ); 
						
						// -> 20091210  추가	
					    makeNodeValue("/root/oz_data/odiParam/iv_year_vaca_dds2",model1.getValue("/root/reqData/reqForm/year_vaca_dds2"));
						makeNodeValue("/root/oz_data/odiParam/iv_add_vaca_dds2",model1.getValue("/root/reqData/reqForm/add_vaca_dds2"));
						makeNodeValue("/root/oz_data/odiParam/iv_duty_vaca_dds2",model1.getValue("/root/reqData/reqForm/temp_vaca_dds2"));
						makeNodeValue("/root/oz_data/odiParam/iv_ym_avg_saly2",model1.getValue("/root/reqData/reqForm/ym_avg_saly2"));
						
						
						openOzwin("/root/oz_data");
					]]>
			</script>
		</button>
	</xhtml:body>
</xhtml:html>
