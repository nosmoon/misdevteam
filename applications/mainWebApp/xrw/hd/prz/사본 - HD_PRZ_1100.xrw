<?xml version="1.0" encoding="EUC-KR"?>
<?xml-stylesheet href="../../../css/style_sheet.css" type="text/css" ?>
<xhtml:html xmlns:ex="http://www.comsquare.co.kr/xforms/excel" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:my="http://www.comsquare.co.kr/example" xmlns:ms="urn:schemas-microsoft-com:xslt" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.w3.org/2002/01/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:cs="http://www.comsquare.co.kr/xforms">
	<xhtml:head>
		<xhtml:title>포상징계내역 조회</xhtml:title>
		<model id="model1">
			<instance id="instance1">
				<root xmlns="">
					<initData>
						<hd_prz_1106_m>
							<dataSet>
								<xx_aplc_clsf_010/>
								<xx_judg_clsf_010/>
							</dataSet>
						</hd_prz_1106_m>
						<!-- 화면 로딩시의 초기 데이터를 담당 -->
						<session/>
						<!-- 서버의 세션 정보를 담당한다 -->
						<comboSet>
							<!-- 선택계열의 정보를 담당 -->
							<dept_cd_1>
								<item/>
							</dept_cd_1>
							<dept_cd_2>
								<item/>
							</dept_cd_2>
							<dept_cd_3>
								<item/>
							</dept_cd_3>
							<dept_cd_4>
								<item/>
							</dept_cd_4>
							<dept_cd_5>
								<item/>
							</dept_cd_5>
							<dept_cd_6>
								<item/>
							</dept_cd_6>
						</comboSet>
						<!-- 콤보리스트와 같은 선택게열의 데이터는 <item>을 반복함으로써 list를 구성한다. -->
						<pageInfo>
							<!-- 해당 화면의 필요한 기타 정보들을 추가운영 할 수 있다 -->
						</pageInfo>
						<!-- 해당 화면의 필요한 기타 정보들을 추가운영 할 수 있다 -->
						<infoData>
							<dty_nm/>
							<dty_cd/>
							<dept_nm/>
							<dept_cd/>
							<flnm/>
							<emp_no/>
							<posi_nm/>
							<posi_cd/>
						</infoData>
					</initData>
					<reqData>
						<!-- 전달하고자 하는 데이터를 담당 ( submit 함수에서 처리) -->
						<!-- 검색조건 처리 -->
						<!-- formData 팝업,화면전환시 data이동시 -->
						<!-- MultiUpDate유형 사용시 처리 -->
						<searchData>
							<dept_cd/>
							<aplc_dt_fm/>
							<aplc_dt_to/>
							<dept_nm/>
							<cmpy_cd/>
							<aplc_clsf/>
							<judg_clsf/>
							<prv_value/>
							<main_value/>
						</searchData>
						<fwdData>
							<func_nm/>
							<emp_no/>
						</fwdData>
						<multiUpData/>
						<reqForm>
							<cmpy_cd/>
							<emp_no/>
							<flnm/>
							<dept_cd/>
							<dept_nm/>
							<dty_cd/>
							<dty_nm/>
							<posi_cd/>
							<posi_nm/>
							<prz_dt/>
							<prz_nm/>
							<prz_resn/>
							<prz_amt/>
							<prz_ptcr/>
						</reqForm>
						<temp_dt/>
						<download>
							<occr_dt/>
							<seq/>
						</download>
					</reqData>
					<resData>
						<!-- 전달 받은 데이터를 담당 ( submit의 결과가 담김) -->
						<!-- 전달 받은 formData를 담당 ( submit의 결과가 담김) -->
						<!-- 전달 받은 데이터를 가공할 임시저장소 ( submit의 결과가 담김) -->
						<!-- 전달 받은 errorCode를 담당 ( submit의 결과가 담김) -->
						<!-- 전달 받은 errorMsg를 담당 ( submit의 결과가 담김) -->
						<gridData>
							<!-- 전달 받은 grid데이터를 담당 ( submit의 결과가 담김) -->
							<record>
								<!-- datagrid1 -->
								<cmpy_cd/>
								<occr_dt/>
								<seq/>
								<sub_seq/>
								<req_pers_flnm/>
								<aplc_clsf/>
								<aplc_clsf_nm/>
								<obj_clsf/>
								<obj_clsf_nm/>
								<aplc_dt/>
								<req_pers_dept_nm/>
								<case_nm/>
								<atic_pubc_dt/>
								<atic_pubc_side/>
								<flnm/>
								<dept_nm/>
								<tms/>
								<prv_insp_dt/>
								<prv_insp_ocom/>
								<prv_insp_resn/>
								<main_insp_dt/>
								<main_insp_ocom/>
								<prz_cd/>
								<prz_nm/>
								<prz_pnsh_cd/>
								<prz_pnsh_nm/>
								<prz_resn_cd/>
								<prz_resn_nm/>
								<prz_grad/>
								<prz_amt/>
								<prv_insp_ocom/>
								<main_insp_ocom/>
								<atic_add_file_nm/>
							</record>
							<sub/>
							<!-- datagrid2 -->
							<detail/>
							<!-- datagrid3 -->
							<totalcnt/>
						</gridData>
						<gridData2>
							<!-- 전달 받은 grid데이터를 담당 ( submit의 결과가 담김) -->
							<record>
								<!-- datagrid1 -->
								<cmpy_cd/>
								<occr_dt/>
								<seq/>
								<sub_seq/>
								<req_pers_flnm/>
								<aplc_clsf/>
								<aplc_clsf_nm/>
								<obj_clsf/>
								<obj_clsf_nm/>
								<aplc_dt/>
								<req_pers_dept_nm/>
								<case_nm/>
								<atic_pubc_dt/>
								<atic_pubc_side/>
								<flnm/>
								<dept_nm/>
								<tms/>
								<prv_insp_dt/>
								<prv_insp_ocom/>
								<prv_insp_resn/>
								<main_insp_dt/>
								<main_insp_ocom/>
								<prz_cd/>
								<prz_nm/>
								<prz_pnsh_cd/>
								<prz_pnsh_nm/>
								<prz_resn_cd/>
								<prz_resn_nm/>
								<prz_grad/>
								<prz_amt/>
							</record>
							<sub/>
							<!-- datagrid2 -->
							<detail/>
							<!-- datagrid3 -->
						</gridData2>
						<resForm>
							<emp_no/>
							<nm_korn/>
							<appmt_cd/>
							<appmt_dt_fm/>
							<appmt_dt_to/>
							<dept_cd/>
							<appmt_stat_clsf/>
							<appmt_sort/>
							<lvcmpy_dt/>
							<dept_nm/>
							<appmt_dt/>
							<temp/>
							<appmt_nm/>
						</resForm>
						<msg/>
						<resPhoto type="xsd:base64Binary"/>
					</resData>
					<tempData>
					</tempData>
					<tempDate>
						<chkDate/>
					</tempDate>
					<totalcnt/>
				</root>
			</instance>
			<script type="javascript">
				<![CDATA[
					function setDept_cd_i(iv_dept_cd, iv_dept_nm){
						model1.setValue("/root/reqData/searchData/dept_cd", iv_dept_cd);
						var dept_temp = iv_dept_cd + " " + iv_dept_nm;
						//model1.setValue("/root/reqData/reqForm/dept_nm", iv_dept_nm);
						model1.setValue("/root/reqData/searchData/dept_nm", iv_dept_nm);
						model1.refresh();
					}	
					
					function popupcomment(part){
						var value = "";
						if (part == '1'){
							 value = model1.getValue("/root/reqData/searchData/prv_value");
						}else{
							  value = model1.getValue("/root/reqData/searchData/main_value");
						}
						return value;
					}	
				]]>
			</script>
			<script type="javascript" ev:event="xforms-ready">
				<![CDATA[				
					model.send("hd_prz_1106_m");
					//alert(model1.getValue("/root/initData/hd_prz_1106_m/dataSet/xx_aplc_clsf_010"));
					//alert(model1.getValue("/root/initData/hd_prz_1106_m/dataSet/xx_judg_clsf_010"));
					model.refresh();
					
					var now_date = new Date();
					var year = now_date.getYear();
					var month = now_date.getMonth() + 1;
					var day = now_date.getDate();    
					var month_tm = '0' + month;
					var day_tm = '0' + day;  
					if(month_tm.length == 3){
						month_tm = month_tm.substring(1, 3);
					}
					if(day_tm.length == 3){
						day_tm = day_tm.substring(1, 3);
					}
					var now_dt = year + month_tm + day_tm;
					var now_dt_sub = year + month_tm + "01";
					model1.setValue("/root/reqData/searchData/aplc_dt_to", now_dt);
					model1.setValue("/root/reqData/searchData/aplc_dt_fm", now_dt_sub);
					
					//model1.setValue("/root/reqData/searchData/aplc_clsf", "00");
					//model1.setValue("/root/reqData/searchData/judg_clsf", "10");
					model1.setValue("/root/reqData/searchData/aplc_clsf", model1.getValue("/root/initData/hd_prz_1106_m/dataSet/xx_aplc_clsf_010"));
					model1.setValue("/root/reqData/searchData/judg_clsf", model1.getValue("/root/initData/hd_prz_1106_m/dataSet/xx_judg_clsf_010"));
					model1.setValue("/root/reqData/temp_dt", now_dt);
					
					model1.send("hd_prz_1100");
					model1.copyNode("/root/initData/comboSet/dept_cd_1", "/root/tempData/dept_cd_1");
					model1.copyNode("/root/initData/comboSet/dept_cd_2", "/root/tempData/dept_cd_2");
					model1.copyNode("/root/initData/comboSet/dept_cd_3", "/root/tempData/dept_cd_3");
					model1.copyNode("/root/initData/comboSet/dept_cd_4", "/root/tempData/dept_cd_4");
					model1.copyNode("/root/initData/comboSet/dept_cd_5", "/root/tempData/dept_cd_5");
					model1.copyNode("/root/initData/comboSet/dept_cd_6", "/root/tempData/dept_cd_6");
					model1.removenode("/root/tempData");
					datagrid3.isReadOnly(1, 1, 1, 15)  =true;
					model1.refresh();
					
					
				]]>
			</script>
			<submission id="hd_prz_1100" action="/hd/prz/1100" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData" resultref="/root/tempData"/>
			<submission id="hd_prz_1101" action="/hd/prz/1101" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData" resultref="/root/tempData"/>
			<submission id="hd_prz_1102" action="/hd/prz/1102" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData" resultref="/root/tempData"/>
			<submission id="hd_prz_1103" action="/hd/prz/1103" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/multiUpData" resultref="/root/tempData"/>
			<submission id="hd_prz_1104" action="/hd/prz/1104" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/download" resultref="/root/tempData"/>
			<submission id="hd_com_1103" action="/hd/com/1103" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/searchData/dept_cd" resultref="/root/tempData"/>
			<submission id="hd_prz_1105_d" action="/hd/prz/1105" mediatype="application/x-www-form-urlencoded" method="post" ref="/root/reqData/multiUpData" resultref="/root/tempData"/>
			<submission id="hd_prz_1106_m" action="/hd/prz/1106" mediatype="application/x-www-form-urlencoded" method="post" resultref="/root/initData/hd_prz_1106_m/dataSet"/>
		</model>
		<script type="javascript" src="/js/CIISComm.js"/>
	</xhtml:head>
	<xhtml:body class="main" pagewidth="946" pageheight="765" guideline="2,775;1,933;1,10;2,50;2,71;2,78;2,730;1,934;1,946;2,700;" style="font-family:굴림; ">
		<caption id="caption6" class="list_cap02" style="left:734px; top:89px; width:200px; height:25px; text-align:center; "/>
		<caption id="caption5" class="list_cap02" style="left:538px; top:89px; width:133px; height:25px; text-align:center; "/>
		<caption id="caption2" class="list_cap02" style="left:342px; top:89px; width:133px; height:25px; text-align:center; "/>
		<import id="iv_Title" src="../../../common/xrw/iv_TitleBar.xrw" style="left:10px; top:5px; width:926px; height:29px; "/>
		<select1 id="combo1" ref="/root/reqData/searchData/judg_clsf" class="req" navindex="4" appearance="minimal" style="left:545px; top:93px; width:120px; height:18px; ">
			<choices>
				<itemset nodeset="/root/initData/comboSet/dept_cd_3/item">
					<label ref="label"/>
					<value ref="value"/>
				</itemset>
			</choices>
		</select1>
		<select1 id="combo2" ref="/root/reqData/searchData/aplc_clsf" class="req" navindex="3" appearance="minimal" style="left:349px; top:92px; width:120px; height:18px; ">
			<choices>
				<itemset nodeset="/root/initData/comboSet/dept_cd_1/item">
					<label ref="label"/>
					<value ref="value"/>
				</itemset>
			</choices>
		</select1>
		<caption id="caption1" class="tit02" style="left:10px; top:68px; width:362px; height:20px; font-weight:bold; ">포상징계내역 조회</caption>
		<datagrid id="datagrid2" nodeset="/root/resData/gridData/record" caption="선택^신청구분^신청일자^요청자^요청부서^건명^기사게재일자^기사게재면^대상자^부서^차수^전심일자^전심결과^전심사유^본심일자^본심결과^포상명^포상(징계)구분^포상사유구분^포상급수^포상금^첨부파일" colsep="#" colwidth="30, 80, 80, 70, 130, 200, 90, 90, 70, 130, 30, 80, 100, 200, 80, 100, 100, 100, 100, 100, 100, 76" extendlastcol="scroll" mergecellsfixedrows="bycolrec" rowheader="update" rowsep="|" selectionmode="free" style="left:10px; top:120px; width:926px; height:240px; ">
			<col checkvalue="1,0" ref="chk" type="checkbox"/>
			<col ref="aplc_clsf_nm"/>
			<col ref="aplc_dt" format="yyyy-mm-dd"/>
			<col ref="req_pers_flnm"/>
			<col ref="req_pers_dept_nm" style="text-align:left; "/>
			<col ref="case_nm" style="text-align:left; "/>
			<col ref="atic_pubc_dt" format="yyyy-mm-dd"/>
			<col ref="atic_pubc_side"/>
			<col ref="flnm" style="left:820px; top:20px; width:100px; height:20px; text-align:center; "/>
			<col ref="dept_nm" style="text-align:left; "/>
			<col ref="tms"/>
			<col ref="prv_insp_dt" format="yyyy-mm-dd"/>
			<col ref="prv_insp_ocom_nm" style="text-align:center; "/>
			<col ref="prv_insp_resn" style="text-align:left; "/>
			<col ref="main_insp_dt" format="yyyy-mm-dd"/>
			<col ref="main_insp_ocom_nm" style="text-align:center; "/>
			<col ref="prz_nm" style="text-align:center; "/>
			<col ref="prz_pnsh_nm" style="text-align:center; "/>
			<col ref="prz_resn_nm" style="text-align:center; "/>
			<col ref="prz_grad"/>
			<col ref="prz_amt" format="#,###" style="text-align:right; "/>
			<col ref="download" style="background-image:../../../images/btn_s_5.gif; ">
				<script type="javascript" ev:event="onclick">
					<![CDATA[
					var row = datagrid2.row;
					var col = datagrid2.col;
					
					var atic_add_file_nm = model1.getValue("root/resData/gridData/record[" + row + "]/atic_add_file_nm");
					var occr_dt = model1.getValue("/root/resData/gridData/record[" + row + "]/occr_dt");
					var seq = model1.getValue("/root/resData/gridData/record[" + row + "]/seq");
					
					if(atic_add_file_nm != "")
					{
						model.setValue("/root/reqData/download/occr_dt",occr_dt);
						model.setValue("/root/reqData/download/seq",seq);
						model.send("hd_prz_1104");
						
						if(submit_completed()) {
						}
					}
					]]>
				</script>
			</col>
			<col ref="cmpy_cd" visibility="hidden"/>
			<col ref="occr_dt" visibility="hidden"/>
			<col ref="seq" visibility="hidden"/>
			<col ref="sub_seq" visibility="hidden"/>
			<col ref="aplc_clsf" visibility="hidden"/>
			<col ref="obj_clsf" visibility="hidden"/>
			<col ref="obj_clsf_nm" visibility="hidden"/>
			<col ref="prz_cd" visibility="hidden"/>
			<col ref="prz_pnsh_cd" visibility="hidden"/>
			<col ref="prz_resn_cd" visibility="hidden"/>
			<col ref="prv_insp_ocom" visibility="hidden"/>
			<col ref="main_insp_ocom" visibility="hidden"/>
			<col ref="atic_add_file_nm" visibility="hidden"/>
			<script type="javascript" ev:event="xforms-deselect">
				<![CDATA[
			       var row = datagrid2.row;
			       if(datagrid2.valueMatrix(row, 2) == "0") {
				       datagrid2.rowstatus(row) = 0;
				       //datagrid2.removeStatus(datagrid2.row, "update");
				       datagrid2.refresh();
			       }       
			       ]]>
			</script>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					if(datagrid2.colType(datagrid2.col)==""){
						rowStatus(datagrid2);
						return;
					}
				]]>
			</script>
		</datagrid>
		<button id="btnA1" class="btn02" style="left:831px; top:50px; width:52px; height:21px; ">
			<caption>조회</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
				   var dt_fm = model1.getValue("/root/reqData/searchData/aplc_dt_fm");
				   var dt_to = model1.getValue("/root/reqData/searchData/aplc_dt_to");
				   var now_dt = model1.getValue("/root/reqData/temp_dt");
				   if(dt_fm > now_dt || dt_to > now_dt){
						alert("신청일자를 확인해 주세요.");
						return;
				   }
				   if(dt_fm > dt_to){
						alert("신청 시작일자가 종료일자보다 클 수 없습니다.");
						return;
				   }
				       
					model1.send("hd_prz_1101");
					model1.removenode("/root/resData/gridData");
					model1.makeNode("/root/resData/gridData");
					model1.refresh();
					model1.copyNode("/root/resData/gridData", "/root/dataSet/CURLIST");
					model1.removenode("/root/dataSet");
					model1.refresh();	
					
					var totcnt = datagrid2.rows;
					model1.setValue("/root/totalcnt", "총 " + Number(totcnt - 1) + " 건");
					
					model1.refresh();	       
					
				]]>
			</script>
		</button>
		<button id="btnA4" class="btn02" style="left:885px; top:50px; width:52px; height:21px; ">
			<caption>종료</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					viewer("mainFrame").window.javaScript.closeMDIWindow(model.getValue("/root/initData/pageInfo/pageID"));
				]]>
			</script>
		</button>
		<button id="button3" class="btn02" style="left:722px; top:50px; width:52px; height:21px; ">
			<caption>초기화</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					datagrid3.rebuild();
					datagrid2.rebuild();
					model1.reset();
				]]>
			</script>
		</button>
		<import id="import1" src="../../../common/xrw/iv_TitleBar.xrw" style="left:10px; top:5px; width:926px; height:29px; "/>
		<caption id="caption3" class="list_cap01" style="left:10px; top:89px; width:65px; height:25px; text-align:center; ">신청일자</caption>
		<input id="input1" ref="/root/reqData/searchData/dept_cd" navindex="5" inputtype="button" maxlength="6" style="left:740px; top:92px; width:66px; height:18px; ">
			<script type="javascript" ev:event="onbuttonclick">
				<![CDATA[
					model1.setValue("/root/reqData/fwdData/func_nm", "setDept_cd_i");
					//window.load("/xrw/hd/com/hd_com_1100.xrw","mdichild", "hd_com_1100", "", "/root/reqData/fwdData", "/root/reqData/fwdData");
					window.load("/xrw/hd/com/HD_COM_1100.xrw","mdichild", "hd_com_1100", "align:center; caption:hidden;", "/root/reqData/fwdData", "/root/reqData/fwdData");					
					]]>
			</script>
			<script type="javascript" ev:event="onmaxlength">
				<![CDATA[
						model1.setValue("/root/reqData/searchData/dept_cd", input1.currentText);
						model1.send("hd_com_1103");
						if(model1.getValue("/root/dataSet/CURLIST/record/cnt") != "1"){
							alert("없는 부서이거나 사용중이 아닌 부서 입니다.");
							model1.setValue("/root/reqData/searchData/dept_cd", "");
							model1.setValue("/root/reqData/searchData/dept_nm", "");
							model1.removenode("/root/dataSet");
							model1.refresh();
							return;
						}
						model1.setValue("/root/reqData/searchData/dept_cd", model1.getValue("/root/dataSet/CURLIST/record/dept_cd"));
						model1.setValue("/root/reqData/searchData/dept_nm", model1.getValue("/root/dataSet/CURLIST/record/abrv_nm"));
						model1.removenode("/root/dataSet");
						model1.refresh();
				]]>
			</script>
		</input>
		<output id="input2" ref="/root/reqData/searchData/dept_nm" appearance="output" style="left:809px; top:92px; width:120px; height:18px; "/>
		<caption id="caption14" class="list_cap02" style="left:74px; top:89px; width:205px; height:25px; text-align:center; "/>
		<input id="output1" ref="/root/reqData/searchData/aplc_dt_fm" class="req" navindex="1" inputtype="date" appearance="output" style="left:80px; top:92px; width:90px; height:18px; ">
			<script type="javascript" ev:event="xforms-value-changed">
				<![CDATA[
				       var dt_fm = model1.getValue("/root/reqData/searchData/aplc_dt_fm");
				       var dt_to = model1.getValue("/root/reqData/searchData/aplc_dt_to");
				       var now_dt = model1.getValue("/root/reqData/temp_dt");
				       if(dt_fm > now_dt || dt_to > now_dt){
				       		alert("현재일 보다 클 수 없습니다.");
				       		return;
				       }
				       if(dt_fm > dt_to){
				       		alert("신청 시작일자가 종료일자보다 클 수 없습니다.");
				       		return;
				       }
				]]>
			</script>
		</input>
		<input id="output2" ref="/root/reqData/searchData/aplc_dt_to" class="req" navindex="2" inputtype="date" appearance="output" style="left:185px; top:92px; width:90px; height:18px; ">
			<script type="javascript" ev:event="xforms-value-changed">
				<![CDATA[
				       var dt_fm = model1.getValue("/root/reqData/searchData/aplc_dt_fm");
				       var dt_to = model1.getValue("/root/reqData/searchData/aplc_dt_to");
				       var now_dt = model1.getValue("/root/reqData/temp_dt");
				       if(dt_fm > now_dt || dt_to > now_dt){
				       		alert("현재일 보다 클 수 없습니다.");
				       		return;
				       }
				       if(dt_fm > dt_to){
				       		alert("신청 시작일자가 종료일자보다 클 수 없습니다.");
				       		return;
				       }
				]]>
			</script>
		</input>
		<caption id="caption4" style="left:171px; top:95px; width:15px; height:15px; ">~</caption>
		<caption id="caption7" class="list_cap01" style="left:278px; top:89px; width:65px; height:25px; text-align:center; ">신청구분</caption>
		<caption id="caption8" class="list_cap01" style="left:474px; top:89px; width:65px; height:25px; text-align:center; ">심사구분</caption>
		<caption id="caption9" class="list_cap01" style="left:670px; top:89px; width:65px; height:25px; text-align:center; ">대상부서</caption>
		<group id="group_btnG1" class="gro_btn" style="left:5px; top:365px; width:926px; height:40px; ">
			<button id="button2" class="btn_grid03" style="left:873px; top:23px; width:53px; height:17px; ">
				<caption>행입력</caption>
				<script type="javascript" ev:event="onclick">
					<![CDATA[
						var list_cnt = datagrid2.rows;
						var list_cnt3 = datagrid3.rows;
						var value = 0;
						var cnt2row = 1
						var trow = 0;
											
						for (var i = 1; i< list_cnt; i++){
							 if(datagrid2.valueMatrix(i, datagrid2.colRef("chk")) == "1") {
							 	trow = i;
							 }
						}
						if (trow == 0){
							 alert("리스트를 먼저 조회하고 선택해 주세요.");
							 return;
						}else{
							model.removeNodeset("/root/resData/gridData2");
						       datagrid3.rebuild(); 	
						
							
							for (var i = 1; i<= trow; i++){
								 if(datagrid2.valueMatrix(i, datagrid2.colRef("chk")) == "1") {
								 	
									if(datagrid3.isReadOnly(1, 1) == 1){
										datagrid3.isReadOnly(1, 1, 1, 10)  = false;
										//datagrid3.addStatus(1, "insert");	
										datagrid3.rowStatus(1) = 3;
										model1.copyNode("/root/resData/gridData2/record","/root/resData/gridData/record["+ i +"]");
										
									}else{
										datagrid3.addRow(true, true);	
										datagrid3.rowStatus(datagrid3.rows-1) = 3;
										model1.copyNode("/root/resData/gridData2/record["+cnt2row +"]","/root/resData/gridData/record["+ i +"]");
									}							 	
								 	cnt2row++;
								 }		
							}				
							model1.refresh();
						}
					]]>
				</script>
			</button>
			<button id="button1" class="btn_grid03" visibility="hidden" style="left:810px; top:23px; width:53px; height:17px; ">
				<caption>행삭제</caption>
				<script type="javascript" ev:event="onclick">
					<![CDATA[
					var v = datagrid3.row;
					if(v == -1){
						alert("삭제 하실 데이터를 먼저 선택하세요.");
						return;
					}else{
						datagrid3.rowStatus(v) = 4;
						datagrid3.refresh();
					}
					]]>
				</script>
			</button>
			<caption id="caption10" ref="/root/totalcnt" style="left:848px; top:0px; width:75px; height:18px; font-weight:bold; text-align:right; "/>
		</group>
		<datagrid id="datagrid3" nodeset="/root/resData/gridData2/record" caption="신청구분^신청일자^요청자^요청부서^건명^기사게재일자^기사게재면^대상자^부서^차수^전심일자^전심결과^전심사유^본심일자^본심결과^포상명^포상(징계)구분^포상사유구분^포상급수^포상금" colsep="#" colwidth="80, 80, 70, 130, 200, 90, 90, 70, 130, 30, 90, 100, 200, 90, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100" extendlastcol="scroll" mergecellsfixedrows="bycolrec" rowheader="update" rowsep="|" selectionmode="free" style="left:10px; top:410px; width:925px; height:290px; ">
			<col ref="aplc_clsf_nm"/>
			<col ref="aplc_dt" format="yyyy-mm-dd"/>
			<col ref="req_pers_flnm"/>
			<col ref="req_pers_dept_nm" style="text-align:left; "/>
			<col ref="case_nm" style="text-align:left; "/>
			<col ref="atic_pubc_dt" format="yyyy-mm-dd"/>
			<col ref="atic_pubc_side"/>
			<col ref="flnm" style="left:820px; top:20px; width:100px; height:20px; text-align:center; "/>
			<col ref="dept_nm" style="text-align:left; "/>
			<col ref="tms" type="input" format="###" maxlength="3"/>
			<col ref="prv_insp_dt" type="inputdate">
				<script type="javascript" ev:event="xforms-value-changed">
					<![CDATA[
					var strCellValue = datagrid3.textmatrix(datagrid3.row,datagrid3.colRef("prv_insp_dt"));
					model.setValue("/root/tempDate/chkDate",strCellValue);

					if (!commGhkCal("/root/tempDate/chkDate")){
						alert("입력하신 날짜가 정확하지 않습니다. 다시 입력해 주십시오.");
						 
						datagrid3.valueMatrix(datagrid3.row,datagrid3.colRef("prv_insp_dt")) = "";
						datagrid3.refresh();
					}
					]]>
				</script>
			</col>
			<col ref="prv_insp_ocom" type="combo" style="text-align:left; ">
				<choices>
					<itemset nodeset="/root/initData/comboSet/dept_cd_4/item">
						<label ref="label"/>
						<value ref="value"/>
					</itemset>
				</choices>
			</col>
			<col ref="prv_insp_resn" type="input" maxlength="50" style="text-align:left; "/>
			<col ref="main_insp_dt" type="inputdate" format="yyyy-mm-dd">
				<script type="javascript" ev:event="xforms-value-changed">
					<![CDATA[
					var strCellValue = datagrid3.textmatrix(datagrid3.row,datagrid3.colRef("main_insp_dt"));
					model.setValue("/root/tempDate/chkDate",strCellValue);

					if (!commGhkCal("/root/tempDate/chkDate")){
						alert("입력하신 날짜가 정확하지 않습니다. 다시 입력해 주십시오.");
						 
						datagrid3.valueMatrix(datagrid3.row,datagrid3.colRef("main_insp_dt")) = "";
						datagrid3.refresh();
					}
					]]>
				</script>
			</col>
			<col ref="main_insp_ocom" type="combo" style="text-align:left; ">
				<choices>
					<itemset nodeset="/root/initData/comboSet/dept_cd_5/item">
						<label ref="label"/>
						<value ref="value"/>
					</itemset>
				</choices>
			</col>
			<col ref="prz_nm"/>
			<col ref="prz_pnsh_cd" type="combo" style="text-align:left; ">
				<choices>
					<itemset nodeset="/root/initData/comboSet/dept_cd_2/item">
						<label ref="label"/>
						<value ref="value"/>
					</itemset>
				</choices>
			</col>
			<col ref="prz_resn_cd" type="combo" style="text-align:left; ">
				<choices>
					<itemset nodeset="/root/initData/comboSet/dept_cd_6/item">
						<label ref="label"/>
						<value ref="value"/>
					</itemset>
				</choices>
			</col>
			<col ref="prz_grad" type="input" format="#,###" maxlength="2"/>
			<col ref="prz_amt" type="input" format="#,###" maxlength="10" style="text-align:right; "/>
			<col ref="cmpy_cd" visibility="hidden"/>
			<col ref="occr_dt" visibility="hidden"/>
			<col ref="seq" visibility="hidden"/>
			<col ref="sub_seq" visibility="hidden"/>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					rowStatus(datagrid3);
				]]>
			</script>
		</datagrid>
		<button id="btnA2" class="btn02" style="left:655px; top:705px; width:52px; height:21px; ">
			<caption>저장</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					var no = model1.getValue("/root/resData/gridData2/record[1]/aplc_clsf_nm");
					if (no == ""){
						alert("저장할 데이터를 행입력 해 주세요..");
						return;
					}else{
						if (!rowInSubmit(datagrid3)) {return; }
						if (window.alert("저장하시겠습니까?", "확인", 1) != 1) {
							return;
						}else{
							model1.setValue("/root/reqData/multiUpData", datagrid3.getUpdateData());
							model1.send("hd_prz_1103");
							
							if(submit_completed()) {
								model1.reset();
								model1.send("hd_prz_1101");
								
								model1.copyNode("/root/resData/gridData", "/root/dataSet/CURLIST");
								model1.removenode("/root/dataSet");
								datagrid3.clearStatus();
								model1.refresh();	
								
								var totcnt = datagrid2.rows;
								model1.setValue("/root/totalcnt", "총 " + Number(totcnt - 1) + " 건");
								model1.refresh();	
							}
						}
					}
				]]>
			</script>
		</button>
		<button id="button4" class="btn05" style="left:709px; top:705px; width:110px; height:21px; ">
			<caption>전심개최통보서 생성</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					var value = "";
					var no = model1.getValue("/root/resData/gridData/record[1]/aplc_clsf_nm");
					if (no == ""){
						alert("리스트를 먼저 조회해 주세요.");
						return;
					}else{
						var tms = 0;						
						var cnt = 0;						
						var list_cnt =  datagrid2.rows;
						var title = new Array(list_cnt);
						var title_cnt = 1;
						for (var i = 1; i < list_cnt; i++){
							var check_value1 = model1.getValue("/root/resData/gridData/record["+i+"]/prv_insp_ocom");
							var check_value2 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_dt");
							var check_value3 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_ocom");
							if (check_value1 == "" && check_value2 == "" && check_value3 == "" ){
								title[i] = model1.getValue("/root/resData/gridData/record["+i+"]/case_nm");
								if (i > 1){
									if (title[i-1] != title[i]){
										title_cnt++;
									}
								}
								cnt++;
							}
						}
						var dept_nm =  new Array(cnt);
						var flnm =  new Array(cnt);
						var case_nm =  new Array(cnt);
						var dept_flnm =  new Array(cnt);					
						var part = new Array(cnt);		
						var dt =  new Array(cnt);		
						for (var i = 1; i < list_cnt; i++){
							var check_value1 = model1.getValue("/root/resData/gridData/record["+i+"]/prv_insp_ocom");
							var check_value2 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_dt");
							var check_value3 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_ocom");
							if (check_value1 == "" && check_value2 == "" && check_value3 == "" ){
								tms = model1.getValue("/root/resData/gridData/record["+i+"]/tms");
								case_nm[i] 	= model1.getValue("/root/resData/gridData/record["+i+"]/case_nm");
								flnm[i] 		= model1.getValue("/root/resData/gridData/record["+i+"]/flnm");
								dept_nm[i] 	= model1.getValue("/root/resData/gridData/record["+i+"]/dept_nm");
								part[i] 		=  model1.getValue("/root/resData/gridData/record["+i+"]/atic_pubc_side");
								dt[i] 			= model1.getValue("/root/resData/gridData/record["+i+"]/atic_pubc_dt");	
							}
						}
						
						value = "\n";
						value += "제목 : 제 "+tms+"차 포상징계위원회 전심회의 개최 \n\n";
						value +="        1. 일시 : \n";
						value +="        2. 장소 : \n";
						value +="        3. 심의 : 포상 "+cnt+"건\n";
						value += "\n";
						value += "\n";
						for (var j = 1;j<list_cnt;j++){							
							
							if (case_nm[j] != null){
								if (j == 0){
									value += "=> ["+case_nm[j]+"] 보도  "+dt[j]+ " 게재 " +part[j]+  " 면 \n";
									var check_value0 = model1.getValue("/root/resData/gridData/record["+j+"]/prv_insp_dt");
									var check_value1 = model1.getValue("/root/resData/gridData/record["+j+"]/prv_insp_ocom");
									var check_value2 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_dt");
									var check_value3 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_ocom");
									if (check_value0 != "" && check_value1 == "" && check_value2 == "" && check_value3 == "" ){
										value += "           ."+dept_nm[j]+ "  " +flnm[j]+ " ";
									}
								}else{
									if ((case_nm[j-1] == case_nm[j])){
										var check_value0 = model1.getValue("/root/resData/gridData/record["+j+"]/prv_insp_dt");
										var check_value1 = model1.getValue("/root/resData/gridData/record["+j+"]/prv_insp_ocom");
										var check_value2 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_dt");
										var check_value3 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_ocom");
										if (check_value0 != "" && check_value1 == "" && check_value2 == "" && check_value3 == "" ){
											value += "           ."+dept_nm[j]+ "  " +flnm[j]+ " ";
										}
									}else {
										value += "\n";
										value += "\n";
										value += "=> ["+case_nm[j]+"] 보도  "+dt[j]+ " 게재 " +part[j]+  " 면 \n";
										var check_value0 = model1.getValue("/root/resData/gridData/record["+j+"]/prv_insp_dt");
										var check_value1 = model1.getValue("/root/resData/gridData/record["+j+"]/prv_insp_ocom");
										var check_value2 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_dt");
										var check_value3 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_ocom");
										if (check_value0 != "" && check_value1 == "" && check_value2 == "" && check_value3 == "" ){
											value += "           ."+dept_nm[j]+ "  " +flnm[j]+ " ";
										}
									}
								}
							}
						}						
						model1.setValue("/root/reqData/searchData/prv_value",value);
						model1.refresh();
						window.load("/xrw/hd/prz/HD_PRZ_1101.xrw","mdichild", "popup", "align:center; caption:hidden;", "/root/reqData/fwdData", "/root/reqData/fwdData");					
					}
				]]>
			</script>
		</button>
		<button id="button5" class="btn05" style="left:823px; top:705px; width:110px; height:21px; ">
			<caption>본심개최통보서 생성</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					var value = "";
					var no = model1.getValue("/root/resData/gridData/record[1]/aplc_clsf_nm");
					if (no == ""){
						alert("리스트를 먼저 조회해 주세요.");
						return;
					}else{
						var tms = 0;
						
						var cnt = 0;
						
						var list_cnt =  datagrid2.rows;
						var title = new Array(list_cnt);
						var title_cnt = 1;
						for (var i = 1; i < list_cnt; i++){
							var check_value2 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_dt");
							var check_value3 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_ocom");
							if (check_value2 == "" && check_value3 == "" ){
								title[i] = model1.getValue("/root/resData/gridData/record["+i+"]/case_nm");
								if (i > 1){
									if (title[i-1] != title[i]){
										title_cnt++;
									}
								}
								cnt++;
							}
						}
						//alert(title_cnt); 					//2
						//alert(cnt);      					//10
						var dept_nm =  new Array(cnt);
						var flnm =  new Array(cnt);
						var case_nm =  new Array(cnt);
						var dept_flnm =  new Array(cnt);					
						var part = new Array(cnt);		
						var dt =  new Array(cnt);		
						for (var i = 1; i < list_cnt; i++){
							var check_value2 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_dt");
							var check_value3 = model1.getValue("/root/resData/gridData/record["+i+"]/main_insp_ocom");
							if (check_value2 != "" && check_value3 == "" ){
								tms = model1.getValue("/root/resData/gridData/record["+i+"]/tms");
								case_nm[i] 	= model1.getValue("/root/resData/gridData/record["+i+"]/case_nm");
								flnm[i] 		= model1.getValue("/root/resData/gridData/record["+i+"]/flnm");
								dept_nm[i] 	= model1.getValue("/root/resData/gridData/record["+i+"]/dept_nm");
								part[i] 		=  model1.getValue("/root/resData/gridData/record["+i+"]/atic_pubc_side");
								dt[i] 			= model1.getValue("/root/resData/gridData/record["+i+"]/atic_pubc_dt");	
								//alert("i = "+i +"nm = "+case_nm[i]);							
							}
						}
						
						value = "\n";
						value += "제목 : 제 "+tms+"차 포상징계위원회 본심회의 개최 \n\n";
						value +="        1. 일시 : \n";
						value +="        2. 장소 : \n";
						value +="        3. 심의 : 포상 "+cnt+"건\n";
						value += "\n";
						value += "\n";
						//alert(case_nm[9]);		
						//alert(case_nm[10]);		
						for (var j = 1;j<list_cnt;j++){							
							
							if (case_nm[j] != null){
								//alert(case_nm[j]);		
								if (j == 0){
									value += "=> ["+case_nm[j]+"] 보도  "+dt[j]+ " 게재 " +part[j]+  " 면 \n";
									var check_value2 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_dt");
									var check_value3 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_ocom");
									if (check_value2 != "" && check_value3 == "" ){
										value += "           ."+dept_nm[j]+ "  " +flnm[j]+ " ";
									}
								}else{
									if ((case_nm[j-1] == case_nm[j])){
										var check_value2 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_dt");
										var check_value3 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_ocom");
										if (check_value2 != "" && check_value3 == "" ){
											value += "           ."+dept_nm[j]+ "  " +flnm[j]+ " ";
										}
									}else {
										value += "\n";
										value += "\n";
										value += "=> ["+case_nm[j]+"] 보도  "+dt[j]+ " 게재 " +part[j]+  " 면 \n";
										var check_value2 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_dt");
										var check_value3 = model1.getValue("/root/resData/gridData/record["+j+"]/main_insp_ocom");
										if ( check_value2 != "" && check_value3 == "" ){
											value += "           ."+dept_nm[j]+ "  " +flnm[j]+ " ";
										}
									}
								}
							}
						}
						
						model1.setValue("/root/reqData/searchData/main_value",value);
						model1.refresh();
						window.load("/xrw/hd/prz/HD_PRZ_1102.xrw","mdichild", "popup", "align:center; caption:hidden;", "/root/reqData/fwdData", "/root/reqData/fwdData");									
					}
				]]>
			</script>
		</button>
		<button id="button6" class="btn02" style="left:776px; top:50px; width:52px; height:21px; ">
			<caption>삭제</caption>
			<script type="javascript" ev:event="onclick">
				<![CDATA[
					if (!rowDelSubmit(datagrid2)) {
						return;
					}
					if(window.alert("삭제 하시겠습니까?", "확인", 1)!=1) return;
					model1.setValue("/root/reqData/multiUpData", datagrid2.getUpdateData());
					model1.send("hd_prz_1105_d");
					model1.removeNode("/root/dataSet");
					model1.refresh();
					if(submit_completed()){
						btnA1.dispatch("onclick");
					}
				]]>
			</script>
		</button>
	</xhtml:body>
</xhtml:html>
